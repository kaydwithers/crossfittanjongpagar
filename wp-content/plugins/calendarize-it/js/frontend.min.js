function _rhc_check_visibility(){jQuery(document).ready(function(e){var t=!1;e(".fullCalendar").each(function(n,a){e(a).is(":visible")&&e(a).find(".fc-content").height()<10?e(a).fullCalendar("render"):e(a).find(".fc-content").height()<10&&(t=!0)}),t&&setTimeout("_rhc_check_visibility()",300)})}function _rhc_check_init_rhc(){jQuery(".rhc_holder").each(function(){return jQuery(this).data("Calendarize")?!0:(init_rhc(),!1)}),setTimeout("_rhc_check_init_rhc()",1e3)}function rhc_in_array(e,t){var n=jQuery.inArray(e,t);return void 0!=n&&-1!=n}function _rhc_widget_link_click(e,t){var n=jQuery(t).data("rhc_event")||!1;if(n&&n.fc_click_target)var a=n.fc_click_target;else var a="_self";if(e.event_rdate||e.gotodate){jQuery("form#calendarizeit_repeat_instance").remove();var r='<form id="calendarizeit_repeat_instance" method="post"></form>';jQuery(r).attr("action",e.url).attr("target",a).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(t){t.stopPropagation();var n=e.url;return null==n||n.indexOf("javascript:void(0);")>0?!1:!0}).submit()}else{var i=e.url;if(null!=i&&0==i.indexOf("javascript:void(0);"))return!1;"_blank"==a?window.open(i):location.href=i}return!1}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function fc_mouseover(){}function fc_event_details(e,t,n){e.id=e.id.replace("@","_"),e.id=e.id.replace(".","_"),e.gcal&&e.description&&(e.description=e.description.replace(/\n/g,"<br />")),jQuery(document).ready(function(a){var r=n.calendar.options.tooltip.target||"_self";!e.local_feed&&e.fc_click_target&&(r=e.fc_click_target),n.calendar.rhc_search(n.calendar,t,!0);var i="fct-"+e.id;if(a("BODY").find("#"+i).length>0&&a("BODY").find("#"+i).remove(),0==a("BODY").find("#"+i).length&&a("BODY").find("#fct-item-template").clone().attr("id",i).addClass("fct-tooltip").bind("close-tooltip",function(){a(this).animate({opacity:0},"fast","swing",function(){a(this).remove()})}).find(".fc-close-tooltip a").on("click",function(){a(".fct-tooltip").trigger("close-tooltip")}).end().appendTo("BODY"),a("BODY").find("#"+i).length>0){var o=a(t.target).offset(),s=n.element.offset(),l=o.left<s.left+n.element.width()/2?!0:!1,d=l?"fc-tip-left":"fc-tip-right";a(".fct-tooltip:not(#"+i+")").trigger("close-tooltip");var c=a("BODY").find("#"+i);if(a("BODY").trigger("rhc_tooltip_before_show",[e,c,n]),c.stop().addClass(d).find(".fc-description").html(e.description).end().css("opacity",0).show(),e.color&&c.css("border-left-color",e.color),e.source&&e.source.fc_click_target&&"_nolink"==e.source.fc_click_target&&(e.url=!1),parseInt(n.calendar.options.tooltip.image)||(e.image=!1),e.url){var f=e.url;e.fc_rrule&&""!=e.fc_rrule,tooltip_click=function(){jQuery("form#calendarizeit_repeat_instance").remove();var t='<form id="calendarizeit_repeat_instance" method="post"></form>';return jQuery(t).attr("target",r).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit(),!1};var u=!(n.calendar.options.tooltip&&n.calendar.options.tooltip.disableTitleLink&&"1"==n.calendar.options.tooltip.disableTitleLink);!u||e.gcal||"javascript:void(0);"==e.url?c.find(".fc-title").html(e.title):e.direct_link?a("<a></a>").attr("href",f).html(e.title).attr("target",r).appendTo(c.find(".fc-title")):a("<a></a>").attr("href",f).bind("click",tooltip_click).html(e.title).attr("target",r).appendTo(c.find(".fc-title")),e.image&&e.image[0]&&(e.direct_link?a("<a></a>").attr("href",f).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")):a("<a></a>").attr("href",f).bind("click",tooltip_click).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")))}else c.find(".fc-title").html(e.title),e.image&&e.image[0]&&a("<img />").attr("src",e.image[0]).appendTo(c.find(".fc-image"));c.find(".fc-start,.fc-end,.fc-hide").hide(),e.allDay?(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDateAllDay||n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show()):(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDate,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDate||n.calendar.options.tooltip.startDate,n.calendar.options))).show()),e.terms&&e.terms.length>0&&a.each(e.terms,function(t,i){if(i.gaddress&&e.local_feed){var o=".fc-term-"+i.taxonomy+"-gaddress";c.find(o).find("a").length>0&&c.find(o).append('<span class="rhc-tooltip tax-term-divider"></span>'),a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.gaddress).attr("target","_blank").appendTo(c.find(o).show())}c.find(".fc-tax-"+i.taxonomy).length>0&&(""==i.name?c.find(".fc-tax-"+i.taxonomy).hide():(c.find(".fc-tax-"+i.taxonomy).find("a").length>0&&c.find(".fc-tax-"+i.taxonomy).append('<span class="rhc-tooltip tax-term-divider"></span>'),i.gaddress&&0==e.local_feed?a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):i.url&&""!=i.url&&n.calendar.options.tooltip.taxonomy_links?a("<a></a>").attr("href",i.url).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):a("<span></span>").html(i.name).appendTo(c.find(".fc-tax-"+i.taxonomy)),c.find(".fc-tax-"+i.taxonomy).find(".tax-label").html(i.taxonomy_label).end().show()))}),o.top=o.top-c.height()/2+a(t.srcElement).height()/2;var h=n.element.offset(),p=h.top-o.top-5;p>0&&(o.top=o.top+p,c.find(".fct-arrow-holder").css("margin-top",-1*p)),o.left=l?o.left+a(t.target).width():o.left+-1*c.width(),"agendaDay"==n.name&&(o.left=o.left-c.width()+50),c.css("min-height",c.height()).css("height","auto").offset(o);var v=document.documentElement.clientWidth||window.innerWidth;client_right=a(document).scrollLeft()+v;var _=o.left+c.width();_>client_right&&(o.left=o.left-(_-client_right)-12,c.offset(o)),c.animate({opacity:1},"fast","swing"),c.unbind("mouseleave").bind("mouseleave",function(){var e=this;return setTimeout(function(){return a(e).is(":hover")?!1:void(n.calendar.options.tooltip_on_hover&&"1"==n.calendar.options.tooltip_on_hover&&a(e).trigger("close-tooltip"))},200),!0}),a("BODY").trigger("rhc_tooltip_after_show",[e,c,n])}})}function no_link(e,t){return t.stopPropagation(),!1}function fc_click(e,t,n){var a=e.fc_click_link?e.fc_click_link:"view";return n&&"rhc_event"==n.name&&"view"==a&&(a="page"),"none"==a?!1:("undefined"==typeof e.fc_click_target&&(e.fc_click_target="_self"),e.url&&"page"==a?e.fc_click_target&&""!=e.fc_click_target?(fc_event_links_to_page(e,t,n),!1):!0:(fc_event_details(e,t,n),!1))}function fc_event_links_to_page(e){jQuery("form#calendarizeit_repeat_instance").remove();var t='<form id="calendarizeit_repeat_instance" method="post" target="'+e.fc_click_target+'"></form>';jQuery(t).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit()}function fc_select(e,t,n,a){jQuery(document).ready(function(e){var t=e(a.target).offset(),n=e(a.target).width();e(".fc-dialog").CalendarizeDialog("open",{offset:t,margin_left:n})})}function _add_param_to_url(e,t,n){if("javascript:void(0);"==e)return e;var a="",r=e.split("?"),o=r[0],s=r[1],l="";if(s){var r=s.split("&");for(i=0;i<r.length;i++)r[i].split("=")[0]!=t&&(a+=l+r[i],l="&")}var d=l+""+t+"="+n;return o+"?"+a+d}function _add_repeat_instance_data_to_url(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url){var t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd");t&&""!=t&&(e.url=_add_param_to_url(e.url,"gotodate",t))}else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",t))}return e}function _add_repeat_instance_data_to_event(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url){var t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd");t&&""!=t&&(e.gotodate=t)}else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.event_rdate=t,e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",e.event_rdate))}return e}function exdate_to_array_of_dates(e){var t=""==e?[]:e.split(",");if(t.length>0){var n=[];for(a=0;a<t.length;a++){var r=t[a];n[n.length]=new Date(r.substring(0,4),r.substring(4,6)-1,r.substring(6,8),r.substring(9,11),r.substring(11,13),r.substring(13,15))}return n}return[]}function init_rhc(){jQuery(document).ready(function($){init_sc_ical_feed(),$("BODY").bind("dbox.loaded",function(){init_sc_ical_feed()}),$(".rhc_holder").each(function(i,el){var ui_theme=$(el).data("rhc_ui_theme");""!=ui_theme&&$("#fullcalendar-theme-css").attr("href",ui_theme);var rhc_options=$(el).data("rhc_options");eval("$(el).Calendarize("+rhc_options+")")}),$(".fc-button-custom").hover(function(){$(this).addClass("fc-state-hover")},function(){$(this).removeClass("fc-state-hover")}),$(window).resize(function(){$(".rhcalendar.not-widget .fullCalendar ").each(function(e,t){set_fc_small(t)})}),$("BODY").data("rhc_tooltip_before_show")||$("BODY").data("rhc_tooltip_before_show",!0).bind("rhc_tooltip_before_show",rhc_tooltip_before_show),$("BODY").data("rhc_tooltip_contend_loaded")||$("BODY").data("rhc_tooltip_contend_loaded",!0).bind("rhc_tooltip_contend_loaded",rhc_tooltip_contend_loaded),$(".rhc-next").on("click",function(){})})}function init_sc_ical_feed(){jQuery(document).ready(function(e){e(".rhc-ical-feed-cont").length>0&&e(".rhc-ical-feed-cont").each(function(t,n){if("1"!=e(n).data("sc_ical_feed_init")){e(n).data("sc_ical_feed_init","1");var a=this,r=e(this).parent(),i=e(this).data("icalendar_button"),o=e(this).attr("data-theme"),s="icalendar",l=(e(this).attr("data-title"),function(t,n){e(t).width(e(t).data("width"));var a=e(n.target).offset(),r=e(n.target).width();e(t).removeClass("ical-tooltip-holder").addClass("ical-tooltip").CalendarizeDialog("open",{offset:a,margin_left:r})});if(e(a).find(".ical-close").unbind("click").click(function(){e(a).CalendarizeDialog("close")}),l){var d=e("<span class='fc-button fc-button-"+s+" "+o+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+i+"</span><span class='fc-button-effect'><span></span></span></span></span>");d&&(d.click(function(e){d.hasClass(o+"-state-disabled")||l(a,e)}).mousedown(function(){d.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){d.removeClass(o+"-state-down")}).hover(function(){d.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){d.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(r),d.addClass(o+"-corner-left"),d.addClass(o+"-corner-right"))}}})})}function get_event_ocurrences(e){var t=jQuery.fullCalendar.parseDate(e.start);if(e.fc_rrule=""==e.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":e.fc_rrule,scheduler=new Scheduler(t,e.fc_rrule,!0),""!=e.fc_interval&&e.fc_exdate){var n=exdate_to_array_of_dates(e.fc_exdate);n.length>0&&scheduler.add_exception_dates(n)}if(e.fc_rdate&&""!=e.fc_rdate){var a=exdate_to_array_of_dates(e.fc_rdate);a.length>0&&scheduler.add_rdates(a)}occurrences=scheduler.occurrences_between(start,end)}function set_fc_small(e){if(jQuery(e).parent().hasClass("not-widget")){var t=parseInt(jQuery(e).width());mobile_width=RHC.mobile_width||480,t>0&&t<=mobile_width?jQuery(e).parent().addClass("fc-small"):jQuery(e).parent().removeClass("fc-small")}}function rhc_tooltip_before_show(e,t,n,a){return jQuery(document).ready(function(r){if(a.calendar.options.tooltip.enableCustom&&t.local_feed)if(n.find(".fct-dbox").hide(),RHC.tooltip_details[t.id]&&"loading"==RHC.tooltip_details[t.id])setTimeout(function(){rhc_tooltip_before_show(e,t,n,a)},200);else if(RHC.tooltip_details[t.id]){if(!0===RHC.tooltip_details[t.id])return n.find(".fct-dbox").show(),!0;n.find(".fct-dbox").empty().show().append(RHC.tooltip_details[t.id].clone()),t.allDay?(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDateAllDay,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDateAllDay||a.calendar.options.tooltip.startDateAllDay,a.calendar.options))):(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDate,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDate||a.calendar.options.tooltip.startDate,a.calendar.options))),r("BODY").trigger("rhc_tooltip_contend_loaded",[e,t,n,a])}else r.post(RHC.ajaxurl,{rhc_action:"rhc_tooltip_detail",id:t.id,event_rdate:t.event_rdate},function(i){r(i).find(".fe-extrainfo-holder").length>0?(RHC.tooltip_details[t.id]=r(i).clone(),rhc_tooltip_before_show(e,t,n,a)):RHC.tooltip_details[t.id]=!0},"html")}),!0}function cb_event_mouseover(e,t,n){return jQuery(document).ready(function(t){if(n.calendar.options.tooltip.enableCustom&&e.local_feed)if(RHC.tooltip_details[e.id]);else{RHC.tooltip_details[e.id]="loading",url=RHC.ajaxurl,url=url+"?rhc_action=rhc_tooltip_detail&id="+e.id+"&event_rdate="+e.event_rdate;var a=new Date;ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:a.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u,t.get(url,{},function(n){RHC.tooltip_details[e.id]=t(n).find(".fe-extrainfo-holder").length>0?t(n).clone():!0},"html")}}),!0}function rhc_tooltip_contend_loaded(){init_sc_ical_feed()}function calendar_widget_day_click(e,t,n,a,r,i,o){var s=jQuery(o).find(".rhc_calendar_widget_day_click_holder");return s.children().length>0?s.children().fadeOut("fast",function(){_calendar_widget_day_click(e,t,n,a,r,i,o)}):_calendar_widget_day_click(e,t,n,a,r,i,o),!0}function _calendar_widget_day_click(e,t,n,a,r,i,o){if(client_events=jQuery("#"+i.calendar_id).find(".fullCalendar").fullCalendar("clientEvents"),client_events.length>0){var s=[],l=[],d=jQuery.fullCalendar.cloneDate(e);d.setHours(0,0,0),jQuery.each(client_events,function(e,t){if(ev_uid=t.id+"-"+t._start.getTime(),-1==jQuery.inArray(ev_uid,s)){var n=jQuery.fullCalendar.cloneDate(t._start);n.setHours(0,0,0),n.getTime()==d.getTime()&&(s.push(ev_uid),l.push(t))}}),l.sort(_rhc_sort_events);var c=jQuery(o).find(".rhc_calendar_widget_day_click_holder"),f=jQuery(o).find(".rhc_calendar_widget_day_click_template").children();c.empty(),jQuery.each(l,function(e,t){t.fc_click_link="page";var n=f.clone();n.find(".rhc_title").append(jQuery(jQuery("<span></span>").html(t.title)).RHCLink(t,a)),t.image&&t.image[0]&&n.find(".rhc_featured_image").append(jQuery(jQuery("<img />").attr("src",t.image[0])).RHCLink(t,a)),n.find(".rhc_date").each(function(e,n){field=jQuery(n).data("fc_field"),date_format=jQuery(n).data("fc_date_format"),(value=t[field])&&jQuery(n).html(jQuery.fullCalendar.formatDate(value,date_format,i))}),t.allDay&&n.find(".rhc-event-time").hide(),n.find(".rhc_description").html(t.description),t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,t){if(n.find(".taxonomy-"+t.taxonomy).parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),t.name&&""!=t.name&&n.find(".taxonomy-"+t.taxonomy).length>0&&(""==t.url?jQuery("<span>"+t.name+"</span>").appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):jQuery("<a>"+t.name+"</a>").attr("href",t.url).appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),n.find(".taxonomy-"+t.taxonomy+"-gaddress").length>0&&t.gaddress&&""!=t.gaddress){n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(t.gaddress);jQuery("<a>"+t.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(n.find(".taxonomy-"+t.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}});var r=t.color||t.source.color||"",o=t.textColor||t.source.textColor||"";o=o.length<=1?"#ffffff":o,r.length>1&&o.length>1&&n.find(".rhc-widget-event-list-date").css("background-color",r).css("color",o),i.widget_autoclick&&1==parseInt(i.widget_autoclick)?n.find(".rhc-widget-event-list-head").parents(".rhc-widget-event-list").addClass("open").find(".rhc-widget-event-list-body").show():n.find(".rhc-widget-event-list-head").unbind("click").bind("click",function(){var e=jQuery(this).parents(".rhc-widget-event-list");e.toggleClass("open"),e.is(".open")?e.find(".rhc-widget-event-list-body").slideDown("fast"):e.find(".rhc-widget-event-list-body").slideUp("fast")}),i.widget_autohover&&1==parseInt(i.widget_autohover)?n.find(".rhc-widget-event-list-head").addClass("hover"):n.find(".rhc-widget-event-list-head").mouseenter(function(){jQuery(this).addClass("hover")}).mouseleave(function(){jQuery(this).removeClass("hover")});var s=t.local_id||0;if(s>0){var l=i.events_source+i.events_source_query;l=l.replace("get_calendar_events","get_icalendar_events");var d=l+"&ics=1";d=d+"&ID="+s,n.find(".rhc-icon-ical").click(function(){window.open(d,"_self")})}t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,a){var r=a.glon||!1,o=a.glat||!1,s=a.gaddress||!1,l="",d=n.find(".rhc-map-view"),c=d.data("size"),f=d.data("zoom"),u=d.data("maptype"),p=t.color||t.source.color||"";if(p=p.length>1?p.toUpperCase(p).replace("#","0x"):"blue",!1!==r&&!1!==o?l="http://maps.googleapis.com/maps/api/staticmap?center="+o+","+r+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+o+","+r+"&sensor=false":!1!==s&&""!=s&&(l="http://maps.googleapis.com/maps/api/staticmap?center="+escape(s)+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+escape(s)+"&sensor=false"),""!=l&&"none"!=i.widget_google_map)if(n.find(".rhc-icon-map").unbind("click").bind("click",function(){var e=n.find(".rhc-map-view .sws-gmap3-cont");if(e.data("gmap_inited"));else if(n.find(".rhc-map-view .sws-gmap3-cont").length>0){e.data("gmap_inited",!0),ratio=n.find(".rhc-map-view").data("ratio"),arr=ratio.split(":"),ratio=arr[1]/arr[0],w=n.find(".rhc-map-view").width(),h=w*ratio,e.height(h);var t=e.data("maptype"),a=e.data("uid"),r=e.data("address");return void rhc_gmap3_init({glat:e.data("glat"),glon:e.data("glon"),zoom:e.data("zoom"),disableDefaultUI:!1,map_type:google.maps.MapTypeId[t],uid:a,name:"",info_windows:"sws-gmap3-info-"+a,markers:"#sws-gmap3-marker-"+a,address:r,scrollwheel:1,traffic:!1})}jQuery(this).parents(".rhc-widget-event-list").find(".rhc-map-view").slideToggle("fast")}).show(),"static"==i.widget_google_map)""!=l&&n.find(".rhc-map-view").empty().hide().append(jQuery("<img />").attr("src",l));else if("interactive"==i.widget_google_map){var v='<div class="sws-gmap3-frame"><div id="map_canvas{uid}" class="sws-gmap3-cont"></div></div><div id="sws-gmap3-marker-{uid}" class="sws-gmap3-marker">|||::</div><div class="sws-gmap3-marker"><div id="sws-gmap3-info-{uid}" >{info_windows}</div></div>',_=t.id+"-"+t.start.getTime();v=v.replace(/\{uid\}/g,_),v=v.replace(/\{info_windows\}/g,a.name),n.find(".rhc-map-view").empty().append(v),n.find(".rhc-map-view .sws-gmap3-cont").data("glat",o).data("glon",r).data("zoom",f).data("maptype",u).data("uid",_).data("address",s)}}),"undefined"!=typeof rhp_vars&&(n.find(".rhc-icon-facebook").length>0&&n.find(".rhc-icon-facebook").show().unbind("click").bind("click",function(e){function n(){}e.preventDefault(),FB.init({appId:rhp_vars.fb_appID,status:!0,cookie:!0});var a={method:"share",href:t.url,link:t.url,name:t.title,caption:t.title,description:t.description};FB.ui(a,n)}),n.find(".rhc-icon-twitter").length>0&&n.find(".rhc-icon-twitter").show().unbind("click").bind("click",function(){var e=(encodeURIComponent(t.url),encodeURIComponent(t.description),"https://twitter.com/share?&url="+t.url+"&text="+t.title+"&counturl="+t.url);window.open(e,"Twitter","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-linkedin").length>0&&n.find(".rhc-icon-linkedin").show().unbind("click").bind("click",function(){var e=encodeURIComponent(t.url),n=encodeURIComponent(t.title),a=encodeURIComponent(t.description),r=encodeURIComponent(t.url),i="http://www.linkedin.com/shareArticle?mini=true&url="+e+"&title="+n+"&summary="+a+e+"&source="+r;window.open(i,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-googleplus").length>0&&n.find(".rhc-icon-googleplus").show().unbind("click").bind("click",function(){var e=encodeURIComponent(t.url),n="https://plus.google.com/share?url="+e;window.open(n,"Google+","width=660,height=400,scrollbars=no;resizable=no")})),n.hide(),c.append(n.fadeIn("fast"))}),jQuery("BODY").trigger("dbox.loaded")}}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function btn_tax_dropdown(){}function dayclick_tooltip_evenlits(e,t,n,a,r,i){console.log("day click",e,i)}function rhc_console(){console&&console.log.apply(console,arguments)}jQuery(document).ready(function(){RHC.visibility_check&&(jQuery(".fullCalendar").length>0&&setTimeout("_rhc_check_visibility()",200),setTimeout("_rhc_check_init_rhc()",500))}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,a,r){return jQuery.easing[jQuery.easing.def](e,t,n,a,r)},easeInQuad:function(e,t,n,a,r){return a*(t/=r)*t+n},easeOutQuad:function(e,t,n,a,r){return-a*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t+n:-a/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,a,r){return a*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,a,r){return a*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t+n:a/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,a,r){return a*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,a,r){return-a*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t+n:-a/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,a,r){return a*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,a,r){return a*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t*t+n:a/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,a,r){return-a*Math.cos(t/r*(Math.PI/2))+a+n},easeOutSine:function(e,t,n,a,r){return a*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,a,r){return-a/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,a,r){return 0==t?n:a*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,a,r){return t==r?n+a:a*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,a,r){return 0==t?n:t==r?n+a:(t/=r/2)<1?a/2*Math.pow(2,10*(t-1))+n:a/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,a,r){return-a*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,a,r){return a*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,a,r){return(t/=r/2)<1?-a/2*(Math.sqrt(1-t*t)-1)+n:a/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-i)*Math.PI/o))+n},easeOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*r-i)*Math.PI/o)+a+n},easeInOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(2==(t/=r/2))return n+a;if(o||(o=.3*r*1.5),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-i)*Math.PI/o)+n:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*r-i)*Math.PI/o)*.5+a+n},easeInBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+n},easeOutBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+n},easeInOutBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?a/2*t*t*(((i*=1.525)+1)*t-i)+n:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+n},easeInBounce:function(e,t,n,a,r){return a-jQuery.easing.easeOutBounce(e,r-t,0,a,r)+n},easeOutBounce:function(e,t,n,a,r){return(t/=r)<1/2.75?7.5625*a*t*t+n:2/2.75>t?a*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?a*(7.5625*(t-=2.25/2.75)*t+.9375)+n:a*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,a,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,a,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,a,r)+.5*a+n}}),Date.countMonthDays=function(e,t){return new Date(e,t+1,0).getDate()},Date.findNthWeekDays=function(e,t,n,a){var r=[];if(n>=0)if(t===!1)for(var i=new Date(e,0,1),o=new Date(e+1,0,1).getTime(),s=0;i.getTime()<o;)i.getDay()==a&&(s++,(0==n||s==n)&&r.push(i)),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1);else{i=new Date(e,t,1);var l=new Date(e,t+1,1).getTime();for(s=0;i.getTime()<l;)i.getDay()==a&&(s++,(0==n||s==n)&&r.push(i)),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1)}else if(0>n)if(t===!1){n=Math.abs(n),i=new Date(e+1,0,0);var d=new Date(e,0,1).getTime();for(s=0;i.getTime()>=d;)i.getDay()==a&&(s++,(0==n||s==n)&&r.push(i)),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1)}else{n=Math.abs(n),i=new Date(e,t+1,0);var c=new Date(e,t,1).getTime();for(s=0;i.getTime()>=c;)i.getDay()==a&&(s++,(0==n||s==n)&&r.push(i)),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1)}return r},Date.prototype.isSameDate=function(e){return e instanceof Date&&this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()},Date.fromWeek=function(e,t,n){e-=1,t=t||(new Date).getFullYear();var a=new Date(t,0,4);return void 0==n&&(n=1),a.nextWeek(n,e)},Date.prototype.nextWeek=function(e,t){void 0==t&&(t=1);var n=0>t?1:-1,a=new Date(this),r=a.getDay();for(void 0==e&&(e=r);a.getDay()!=e;)a.setDate(a.getDate()+n);return a.setDate(a.getDate()+7*t),a},Date.prototype.getWeekNo=function(e){e=void 0!==e?e:0;var t=new Date(this.getFullYear(),0,1),n=t.getDay()-e;n=n>=0?n:n+7;var a,r=Math.floor((this.getTime()-t.getTime()-6e4*(this.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)+1;if(4>n){if(a=Math.floor((r+n-1)/7)+1,a>52){var i=new Date(this.getFullYear()+1,0,1),o=i.getDay()-e;o=o>=0?o:o+7,a=4>o?1:53}}else a=Math.floor((r+n-1)/7);return a},Scheduler=function(e,t,n){this.init_recurrence_rules=function(){this.rrule_freq=!1,this.rrule_count=!1,this.rrule_until=!1,this.rrule_interval=1,this.rrule_bysecond=!1,this.rrule_byminute=!1,this.rrule_byhour=!1,this.rrule_byday=!1,this.rrule_bymonthday=!1,this.rrule_byyearday=!1,this.rrule_byweekno=!1,this.rrule_bymonth=!1,this.rrule_bysetpos=!1,this.rrule_wkst="MO"},this.test_mode=n===!0?!0:!1,this.start_date=e,this.start_ts=e.getTime(),this.init_recurrence_rules(),this.exception_dates=[],this.repeat_dates=[],this.dayFromDayNo=["SU","MO","TU","WE","TH","FR","SA"],this.dayNoFromDay={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},t&&this.add_recurrence_rules(t)},Scheduler.prototype.add_recurrence_rules=function(e){0==e.indexOf("RRULE:")&&(e=e.slice(6));for(var t=e.split(";"),n=t.length,a=0;n>a;a++){var r=t[a].split("="),i=r[1];switch(r[0]){case"FREQ":this.rrule_freq=i;break;case"UNTIL":var o=i,s=o.substr(0,4),l=o.substr(4,2)-1,d=o.substr(6,2);if(o.length>8){var c=o.substr(9,2),f=o.substr(11,2),u=o.substr(13,2);this.rrule_until=new Date(s,l,d,c,f,u).getTime()}else this.rrule_until=new Date(s,l,d,23,59,59).getTime();break;case"COUNT":this.rrule_count=i;break;case"INTERVAL":this.rrule_interval=i;break;case"BYSECOND":this.rrule_bysecond=i.split(",");break;case"BYMINUTE":this.rrule_byminute=i.split(",");break;case"BYHOUR":this.rrule_byhour=i.split(",");break;case"BYDAY":this.rrule_byday=i.split(",");break;case"BYMONTHDAY":"WEEKLY"!=this.rrule_freq&&(this.rrule_bymonthday=i.split(","));break;case"BYYEARDAY":"YEARLY"==this.rrule_freq&&(this.rrule_byyearday=i.split(","));break;case"BYWEEKNO":"YEARLY"==this.rrule_freq&&(this.rrule_byweekno=i.split(","));break;case"BYMONTH":this.rrule_bymonth=i.split(",");break;case"BYSETPOS":this.rrule_bysetpos=i.split(","),this.rrule_bysetpos.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});break;case"WKST":this.rrule_wkst=i}}this.rrule_bysecond||(this.rrule_bysecond=[this.start_date.getSeconds().toString()]),this.rrule_byminute||(this.rrule_byminute=[this.start_date.getMinutes().toString()]),this.rrule_byhour||(this.rrule_byhour=[this.start_date.getHours().toString()]),this.rrule_byday||"WEEKLY"!=this.rrule_freq||(this.rrule_byday=[this.dayFromDayNo[this.start_date.getDay()]]),this.rrule_byday||this.rrule_bymonthday||this.rrule_byyearday||this.rrule_byweekno||"MONTHLY"!=this.rrule_freq&&"YEARLY"!=this.rrule_freq||(this.rrule_bymonthday=[this.start_date.getDate().toString()]),this.rrule_byday||this.rrule_byyearday||this.rrule_bymonth||this.rrule_byweekno||"YEARLY"!=this.rrule_freq||(this.rrule_bymonth=[(this.start_date.getMonth()+1).toString()])},Scheduler.prototype.remove_recurrence_rules=function(){this.init_recurrence_rules()},Scheduler.prototype.add_exception_dates=function(e){for(var t=e.length,n=0;t>n;n++)this.exception_dates.push(e[n].getTime());this.exception_dates.sort()},Scheduler.prototype.remove_exception_dates=function(){this.exception_dates=[]},Scheduler.prototype.all_occurrences=function(e,t){var n=[];if((void 0===e||void 0===t)&&this.rrule_count===!1&&this.rrule_until===!1)return null;var a=this.start_date,r=0,i=0,o=0;e:for(;(this.rrule_count===!1||r<this.rrule_count)&&(this.rrule_until===!1||a.getTime()<=this.rrule_until)&&(void 0===t||a.getTime()<=t);){var s=this.dayFromDayNo[a.getDay()],l=a.getDate(),d=a.getMonth()+1,c=a.getFullYear(),f=a.getWeekNo("MO"==this.rrule_wkst?1:0),u=a.getHours(),h=a.getMinutes(),p=a.getSeconds();if(o++>1e4){console.log("rrecur-parser.js, infinite loop. breaking.");break}if(this.current_pos=1,this.old_pos=[],i%this.rrule_interval==0&&this.check_rules(s,l,d,f,u,h,p))if("DAILY"==this.rrule_freq)for(var v=0;v<this.rrule_byhour.length;v++)for(var _=0;_<this.rrule_byminute.length;_++)for(var g=0;g<this.rrule_bysecond.length;g++){var m=new Date(c,d-1,l,this.rrule_byhour[v],this.rrule_byminute[_],this.rrule_bysecond[g]),y=m.getTime();
if(this.rrule_bysetpos===!1||rhc_in_array(this.current_pos.toString(),this.rrule_bysetpos)){if(this.rrule_until!==!1&&y>this.rrule_until||void 0!==t&&y>t)break e;if(y>=this.start_ts&&((void 0===e||y>=e)&&n.push(m),r++),this.current_pos++,this.old_pos.push(m),this.rrule_count!==!1&&r>=this.rrule_count)break e}else this.current_pos++,this.old_pos.push(m)}else if(rhc_in_array(this.rrule_freq,["WEEKLY","MONTHLY","YEARLY"])){switch(this.rrule_freq){case"WEEKLY":var w=1==f&&12==d?parseInt(c+1):c,b=Date.fromWeek(f,w,"MO"==this.rrule_wkst?1:0),D=Date.fromWeek(f+1,w,"MO"==this.rrule_wkst?1:0);break;case"MONTHLY":b=new Date(c,d-1,1),D=new Date(c,d,1);break;case"YEARLY":b=new Date(c,0,1),D=new Date(c+1,0,1)}for(var C=b;C.getTime()<D.getTime();){var x=C.getTime();if(this.rrule_until!==!1&&x>this.rrule_until||void 0!==t&&x>t)break e;if(this.check_day(C))for(v=0;v<this.rrule_byhour.length;v++)for(_=0;_<this.rrule_byminute.length;_++)for(g=0;g<this.rrule_bysecond.length;g++)if(m=new Date(C.getFullYear(),C.getMonth(),C.getDate(),this.rrule_byhour[v],this.rrule_byminute[_],this.rrule_bysecond[g]),y=m.getTime(),this.rrule_bysetpos===!1||rhc_in_array(this.current_pos.toString(),this.rrule_bysetpos)){if(this.rrule_until!==!1&&y>this.rrule_until||void 0!==t&&y>t)break e;if(y>=this.start_ts&&((void 0===e||y>=e)&&n.push(m),r++),this.current_pos++,this.old_pos.push(m),this.rrule_count!==!1&&r>=this.rrule_count)break e}else this.current_pos++,this.old_pos.push(m);C=new Date(C),C.setDate(C.getDate()+1)}if(this.rrule_bysetpos instanceof Array)for(var k=0;k<this.rrule_bysetpos.length;k++){var M=parseInt(this.rrule_bysetpos[k],10);if(0>M){M=Math.abs(M);var T=this.old_pos.reverse(),$=T[M-1];if($&&$>=this.start_ts&&(n.push($),r++),this.rrule_count!==!1&&r>=this.rrule_count)break e}}}i++,a=this.next_period(a)}if(this.repeat_dates.length>0){for(var S=0;S<this.repeat_dates.length;S++){var E=new Date(this.repeat_dates[S]);rhc_in_array(z,n)||n.push(E)}n.sort()}for(var j=n.length,H=[],S=0;j>S;S++){var E=n[S],z=E.getTime();rhc_in_array(z,this.exception_dates)||H.push(this.test_mode?z:E)}return H},Scheduler.prototype.next_period=function(e){switch(this.rrule_freq){case"DAILY":var t=new Date(e);return t.setDate(e.getDate()+1),t;case"WEEKLY":return e.nextWeek();case"MONTHLY":return t=new Date(e),t.setMonth(e.getMonth()+1,1),t;case"YEARLY":return t=new Date(e),t.setFullYear(e.getFullYear()+1),t}},Scheduler.prototype.check_rules=function(e,t,n){switch(this.rrule_freq){case"DAILY":return(void 0===n||this.rrule_bymonth===!1||rhc_in_array(n.toString(),this.rrule_bymonth))&&(void 0===t||this.rrule_bymonthday===!1||rhc_in_array(t.toString(),this.rrule_bymonthday))&&(void 0===e||this.rrule_byday===!1||rhc_in_array(e.toString(),this.rrule_byday));case"WEEKLY":return(void 0===n||this.rrule_bymonth===!1||rhc_in_array(n.toString(),this.rrule_bymonth))&&(void 0===t||this.rrule_bymonthday===!1||rhc_in_array(t.toString(),this.rrule_bymonthday));case"MONTHLY":return void 0===n||this.rrule_bymonth===!1||rhc_in_array(n.toString(),this.rrule_bymonth);case"YEARLY":return!0}},Scheduler.prototype.occurrences_between=function(e,t){var n=e.getTime(),a=t.getTime();return this.all_occurrences(n,a)},Scheduler.prototype.check_day=function(e){var t="YEARLY"==this.rrule_freq,n="WEEKLY"==this.rrule_freq,a=this.dayFromDayNo[e.getDay()],r=e.getDate(),i=e.getMonth()+1,o=e.getFullYear();if(t)var s=e.getWeekNo("MO"==this.rrule_wkst?1:0);if(this.rrule_bymonth!==!1&&!rhc_in_array(i.toString(),this.rrule_bymonth))return!1;if(this.rrule_byday!==!1)if(n){if(!rhc_in_array(a,this.rrule_byday))return!1}else{p=!1;for(var l=0;l<this.rrule_byday.length;l++)for(var d=/([+0-9-]*)([A-Z]+)/.exec(this.rrule_byday[l]),c=Date.findNthWeekDays(o,t?!1:i-1,d[1]?d[1]:0,this.dayNoFromDay[d[2]]),f=0;f<c.length;f++)if(e.isSameDate(c[f])){p=!0;break}if(!p)return!1}if(!n&&this.rrule_bymonthday!==!1){for(var u=Date.countMonthDays(o,i-1),h=r-1-u,p=!1,v=0;v<this.rrule_bymonthday.length;v++){var _=parseInt(this.rrule_bymonthday[v],10);if(r==_||h==_){p=!0;break}}if(!p)return!1}if(t){if(this.rrule_byyearday!==!1){p=!1;for(var g=0;g<this.rrule_byyearday.length;g++){var m=this.rrule_byyearday[g];if(m>0){var y=new Date(o,0,parseInt(m,10));if(e.isSameDate(y)){p=!0;break}}else{if(!(0>m))continue;if(y=new Date(o+1,0,1+parseInt(m,10)),e.isSameDate(y)){p=!0;break}}}if(!p)return!1}if(this.rrule_byweekno!==!1){p=!1;for(var w=0;w<this.rrule_byweekno.length;w++){var b=this.rrule_byweekno[w];if(b)if(b>0){if(b==s){p=!0;break}}else{if(!(0>b))continue;var D=new Date(o,11,31).getWeekNo();if(s==D+1+b){p=!0;break}}}if(!p)return!1}}return!0},Scheduler.prototype.limited_occurrences=function(e,t,n){var a=[];if((void 0===e||void 0===t)&&this.rrule_count===!1&&this.rrule_until===!1)return null;var r=this.start_date,i=0,o=0;e:for(;(this.rrule_count===!1||i<this.rrule_count)&&(this.rrule_until===!1||r.getTime()<=this.rrule_until)&&(void 0===t||r.getTime()<=t)&&!(a.length>=n);){var s=this.dayFromDayNo[r.getDay()],l=r.getDate(),d=r.getMonth()+1,c=r.getFullYear(),f=r.getWeekNo("MO"==this.rrule_wkst?1:0),u=r.getHours(),h=r.getMinutes(),p=r.getSeconds();if(this.current_pos=1,this.old_pos=[],o%this.rrule_interval==0&&this.check_rules(s,l,d,f,u,h,p))if("DAILY"==this.rrule_freq)for(var v=0;v<this.rrule_byhour.length;v++)for(var _=0;_<this.rrule_byminute.length;_++)for(var g=0;g<this.rrule_bysecond.length;g++){var m=new Date(c,d-1,l,this.rrule_byhour[v],this.rrule_byminute[_],this.rrule_bysecond[g]),y=m.getTime();if(this.rrule_bysetpos===!1||rhc_in_array(this.current_pos.toString(),this.rrule_bysetpos)){if(this.rrule_until!==!1&&y>this.rrule_until||void 0!==t&&y>t)break e;if(y>=this.start_ts&&((void 0===e||y>=e)&&a.push(m),i++),this.current_pos++,this.old_pos.push(m),this.rrule_count!==!1&&i>=this.rrule_count)break e}else this.current_pos++,this.old_pos.push(m)}else if(rhc_in_array(this.rrule_freq,["WEEKLY","MONTHLY","YEARLY"])){switch(this.rrule_freq){case"WEEKLY":var w=Date.fromWeek(f,c,"MO"==this.rrule_wkst?1:0),b=Date.fromWeek(f+1,c,"MO"==this.rrule_wkst?1:0);break;case"MONTHLY":w=new Date(c,d-1,1),b=new Date(c,d,1);break;case"YEARLY":w=new Date(c,0,1),b=new Date(c+1,0,1)}for(var D=w;D.getTime()<b.getTime();){var C=D.getTime();if(this.rrule_until!==!1&&C>this.rrule_until||void 0!==t&&C>t)break e;if(this.check_day(D))for(v=0;v<this.rrule_byhour.length;v++)for(_=0;_<this.rrule_byminute.length;_++)for(g=0;g<this.rrule_bysecond.length;g++)if(m=new Date(D.getFullYear(),D.getMonth(),D.getDate(),this.rrule_byhour[v],this.rrule_byminute[_],this.rrule_bysecond[g]),y=m.getTime(),this.rrule_bysetpos===!1||rhc_in_array(this.current_pos.toString(),this.rrule_bysetpos)){if(this.rrule_until!==!1&&y>this.rrule_until||void 0!==t&&y>t)break e;if(y>=this.start_ts&&((void 0===e||y>=e)&&a.push(m),i++),this.current_pos++,this.old_pos.push(m),this.rrule_count!==!1&&i>=this.rrule_count)break e}else this.current_pos++,this.old_pos.push(m);D=new Date(D),D.setDate(D.getDate()+1)}if(this.rrule_bysetpos instanceof Array)for(var x=0;x<this.rrule_bysetpos.length;x++){var k=parseInt(this.rrule_bysetpos[x],10);if(0>k){k=Math.abs(k);var M=this.old_pos.reverse(),T=M[k-1];if(T&&T>=this.start_ts&&(a.push(T),i++),this.rrule_count!==!1&&i>=this.rrule_count)break e}}}o++,r=this.next_period(r)}if(this.repeat_dates.length>0){for(var $=0;$<this.repeat_dates.length;$++){var S=new Date(this.repeat_dates[$]);rhc_in_array(H,a)||a.push(S)}a.sort()}for(var E=a.length,j=[],$=0;E>$;$++){var S=a[$],H=S.getTime();rhc_in_array(H,this.exception_dates)||j.push(this.test_mode?H:S)}return j},Scheduler.prototype.add_rdates=function(e){for(var t=e.length,n=0;t>n;n++)this.repeat_dates.push(e[n].getTime());this.repeat_dates.sort()},function(e,t){function n(t){e.extend(!0,xt,t)}function r(n,a,r){function c(t,n,a){e(ht).find(".fc-filters-dialog").length>0&&(a||e(ht).find(".fc-filters-dialog").is(":visible")?e(ht).find(".fc-filters-dialog").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){e(this).hide()}):(jQuery(".fct-tooltip").trigger("close-tooltip"),e(ht).find(".fc-filters-dialog").stop().show().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:1,top:0},"fast","linear",function(){e(this).find(".fbd-unchecked").css("overflow-y","auto")})))}function f(e){it?_()&&(M(),x(e)):u()}function u(){ot=a.theme?"ui":"fc",n.addClass("fc"),n.addClass(a.isRTL?"fc-rtl":"fc-ltr"),a.theme&&n.addClass("ui-widget"),it=e("<div class='fc-content' style='position:relative'/>").prependTo(n),at=new i(nt,a),rt=at.render(),rt&&n.prepend(rt),y(a.defaultView),a.handleWindowResize&&e(window).resize($),m()||h()}function h(){setTimeout(function(){!st.start&&m()&&C()},0)}function v(){st&&(tt("viewDestroy",st,st,st.element),st.triggerEventDestroy()),e(window).unbind("resize",$),at.destroy(),it.remove(),n.removeClass("fc fc-rtl ui-widget")}function _(){return n.is(":visible")}function m(){return e("body").is(":visible")}function y(e){st&&e==st.name||w(e)}function w(t){firstTime=0==it.find(".fc-view").length?!0:!1,noTransition=firstTime||nt.options.transition.notransition&&1==parseInt(nt.options.transition.notransition)?!0:!1;var n=st;if(jQuery(".fct-tooltip").trigger("close-tooltip"),vt++,st&&(tt("viewDestroy",st,st,st.element),N(),st.triggerEventDestroy(),G(),noTransition&&st.element.remove(),at.deactivateButton(st.name)),at.activateButton(t),st=new Tt[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(it),nt),n&&n.viewLeave&&n.viewLeave(n,st,nt),st.transitionStarted&&st.transitionStarted(n),!noTransition){it.css("overflow","hidden");var a=it.width(),r=it.height(),i={rtl:{newView:{left:a,top:0},oldView:{left:-1*a,top:0}},ltr:{newView:{left:-1*a,top:0},oldView:{left:a,top:0}},ttb:{newView:{left:0,top:-1*r},oldView:{left:0,top:r}},btt:{newView:{left:0,top:r},oldView:{left:0,top:-1*r}}},o=nt.options.transition.direction?nt.options.transition.direction:"horizontal";if(n){if(0==e(".fc-button-"+t).length)var s="horizontal"==o?i.rtl:i.ttb;else if(e(".fc-button-"+n.name).length>0&&e(".fc-button-"+t).length>0&&e(".fc-button-"+n.name).position().left<e(".fc-button-"+t).position().left)var s="horizontal"==o?i.rtl:i.ttb;else var s="horizontal"==o?i.ltr:i.btt;st.lastView=n.name}else{var s="horizontal"==o?i.rtl:i.ttb;st.lastView=!1}return n&&n.element.css("z-index",0).css("position","absolute"),st.element.appendTo(it).css("left",s.newView.left).css("top",s.newView.top).css("opacity",0).css("z-index",1).show(),n.element.animate({opacity:0,left:s.oldView.left,top:s.oldView.top},nt.options.transition.duration||"slow",nt.options.transition.easing||"linear",function(){n.element.hide().css("position","relative").css("opacity",1).css("left",0)}),C(),G(),void st.element.animate({opacity:1,left:0,top:0},nt.options.transition.duration||"slow",nt.options.transition.easing||"linear",function(){n.element.hide().css("position","relative"),st.transitionEnded&&st.transitionEnded(n),X(),vt--,it.find(".fc-view:hidden").remove()})}st.transitionEnded&&st.transitionEnded(n),C(),X(),vt--}function C(e){(!st.start||e||_t<st.start||_t>=st.end)&&_()&&x(e)}function x(t){if(vt++,st.start&&(tt("viewDestroy",st,st,st.element),N(),H()),G(),st.render(_t,t||0),nt.options.skipMonths&&-1!=e.inArray(_t.getMonth(),nt.options.skipMonths)){increase=t||1;for(var n=0;n++<366;){if(-1==e.inArray(_t.getMonth(),nt.options.skipMonths)){st.render(_t,0);break}_t.setDate(_t.getDate()+increase)}}T(),X(),(st.afterRender||O)(),F(),Q(),tt("viewRender",st,st,st.element),st.trigger("viewDisplay",ht),vt--,L()}function k(){if(_()){if(N(),H(),M(),T(),"rhc_event"==st.name)return;j()}}function M(){dt=a.contentHeight?a.contentHeight:a.height?a.height-(rt?rt.height():0)-z(it):Math.round(it.width()/Math.max(a.aspectRatio,.5))}function T(){dt===t&&M(),vt++,st.setHeight(dt),st.setWidth(it.width()),vt--,lt=n.outerWidth()}function $(){if(!vt)if(st.start){var e=++pt;setTimeout(function(){e==pt&&!vt&&_()&&lt!=(lt=n.outerWidth())&&(vt++,k(),st.trigger("windowResize",ht),vt--)},200)}else h()}function S(){H(),R()}function E(e){H(),j(e)}function j(e){_()&&(st.setEventData(gt),st.renderEvents(gt,e),st.trigger("eventAfterAllRender"))}function H(){st.triggerEventDestroy(),st.clearEvents(),st.clearEventData()}function L(){!a.lazyFetching||ft(st.visStart,st.visEnd)?R():j()}function R(){ut(st.visStart,st.visEnd)}function I(e){gt=e,j()}function A(e){E(e)}function F(){at.updateTitle(st.title)}function Q(){var e=new Date;e>=st.start&&e<st.end?at.disableButton("today"):at.enableButton("today")}function Y(e,n,a){st.select(e,n,a===t?!0:a)}function N(){st&&st.unselect()}function B(){C(-1)}function W(){C(1)}function q(){s(_t,-1),C()}function P(){s(_t,1),C()}function V(){_t=new Date,C()}function U(e,t,n){e instanceof Date?_t=p(e):g(_t,e,t,n),C()}function K(e,n,a){e!==t&&s(_t,e),n!==t&&l(_t,n),a!==t&&d(_t,a),C()}function J(){return p(_t)}function G(){it.css({width:"100%",height:it.height(),overflow:"hidden"})}function X(){it.css({width:"",height:"",overflow:""})}function Z(){return st}function et(e,n){return n===t?a[e]:void(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(a[e]=n,k()))}function tt(e,t){return a[e]?a[e].apply(t||ht,Array.prototype.slice.call(arguments,2)):void 0}var nt=this;nt.options=a,nt.render=f,nt.destroy=v,nt.refetchEvents=S,nt.reportEvents=I,nt.reportEventChange=A,nt.rerenderEvents=E,nt.changeView=y,nt.select=Y,nt.unselect=N,nt.prev=B,nt.next=W,nt.prevYear=q,nt.nextYear=P,nt.today=V,nt.gotoDate=U,nt.incrementDate=K,nt.formatDate=function(e,t){return b(e,t,a)},nt.formatDates=function(e,t,n){return D(e,t,n,a)},nt.getDate=J,nt.getView=Z,nt.option=et,nt.trigger=tt,nt.rhc_search=c,o.call(nt,a,r);var at,rt,it,ot,st,lt,dt,ct,ft=nt.isFetchNeeded,ut=nt.fetchEvents,ht=n[0],pt=0,vt=0,_t=new Date,gt=[];nt.date=_t,g(_t,a.year,a.month,a.date),a.droppable&&e(document).bind("dragstart",function(t,n){var r=t.target,i=e(r);if(!i.parents(".fc").length){var o=a.dropAccept;(e.isFunction(o)?o.call(r,i):i.is(o))&&(ct=r,st.dragStart(ct,t,n))}}).bind("dragstop",function(e,t){ct&&(st.dragStop(ct,e,t),ct=null)})}function i(t,n){function a(){u=n.theme?"ui":"fc";var t=n.header;return t?h=e("<div class='fc-header'/>").append(e("<div class='fc-header-row' />").append(i("center")).append(i("left")).append(i("right"))):void 0}function r(){h.remove()}function i(a){var r=e("<div class='fc-header-cell fc-header-"+a+"'/>"),i=n.header[a];return i&&e.each(i.split(" "),function(a){a>0&&r.append("<span class='fc-header-space'/>");var i;e.each(this.split(","),function(a,o){if("title"==o)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(u+"-corner-right"),i=null;else{var s;if(t[o]?s=t[o]:Tt[o]?s=function(){c.removeClass(u+"-state-hover"),t.changeView(o)}:n[o]&&(s=function(){s=n[o]}),s){var l=n.theme?Y(n.buttonIcons,o):null,d=Y(n.buttonText,o),c=e("<span class='fc-button fc-button-"+o+" "+u+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":d)+"</span>").click(function(){c.hasClass(u+"-state-disabled")||s(t,r)}).mousedown(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){c.removeClass(u+"-state-down")}).hover(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){c.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(r);B(c),i||c.addClass(u+"-corner-left"),i=c}}}),i&&i.addClass(u+"-corner-right")}),r}function o(e){h.find("h2").html(e)}function s(e){h.find("span.fc-button-"+e).addClass(u+"-state-active")}function l(e){h.find("span.fc-button-"+e).removeClass(u+"-state-active")}function d(e){h.find("span.fc-button-"+e).addClass(u+"-state-disabled")}function c(e){h.find("span.fc-button-"+e).removeClass(u+"-state-disabled")}var f=this;f.render=a,f.destroy=r,f.updateTitle=o,f.activateButton=s,f.deactivateButton=l,f.disableButton=d,f.enableButton=c;var u,h=e([])}function o(n,a){function r(e,t){return!k||k>e||t>M}function i(e,t){k=e,M=t,R=[];var n=++H,a=j.length;z=a;for(var r=0;a>r;r++)o(j[r],n)}function o(t,a){s(t,function(r){if(a==H){if(r){n.eventDataTransform&&(r=e.map(r,n.eventDataTransform)),t.eventDataTransform&&(r=e.map(r,t.eventDataTransform));for(var i=0;i<r.length;i++)r[i].source=t,w(r[i]);R=R.concat(r)}z--,z||S(R)}})}function s(t,a){var r,i,o=Mt.sourceFetchers;for(r=0;r<o.length;r++){if(i=o[r](t,k,M,a),i===!0)return;if("object"==typeof i)return void s(i,a)}var l=t.events;if(l)e.isFunction(l)?(g(),l(p(k),p(M),function(e){a(e),y()})):e.isArray(l)?a(l):a();else{var d=t.url;if(d){var c,f=t.success,u=t.error,h=t.complete;c=e.isFunction(t.data)?t.data():t.data;var v=e.extend({},c||{}),_=V(t.startParam,n.startParam),m=V(t.endParam,n.endParam);_&&(v[_]=Math.round(+k/1e3)),m&&(v[m]=Math.round(+M/1e3)),g(),e.ajax(e.extend({},$t,t,{data:v,success:function(t){t=t||[];var n=P(f,this,arguments);e.isArray(n)&&(t=n),a(t)},error:function(){P(u,this,arguments),a()},complete:function(){P(h,this,arguments),y()}}))}else a()}}function l(e){e=d(e),e&&(z++,o(e,H))}function d(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(b(t),j.push(t),t):void 0}function c(t){j=e.grep(j,function(e){return!D(e,t)}),R=e.grep(R,function(e){return!D(e.source,t)}),S(R)}function f(){j=[],R=[],S(R)}function u(e){var t,n,a=R.length,r=$().defaultEventEnd,i=e.start-e._start,o=e.end?e.end-(e._end||r(e)):0;for(t=0;a>t;t++)n=R[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+i),n.end=e.end?new Date(n.end?+n.end+o:+r(n)+o):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,w(n));w(e),S(R)}function h(e,t){w(e),e.source||(t&&(E.events.push(e),e.source=E),R.push(e)),S(R)}function v(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}R=e.grep(R,t,!0);for(var a=0;a<j.length;a++)e.isArray(j[a].events)&&(j[a].events=e.grep(j[a].events,t,!0))}else{R=[];for(var a=0;a<j.length;a++)e.isArray(j[a].events)&&(j[a].events=[])}S(R)}function _(t){return e.isFunction(t)?e.grep(R,t):t?(t+="",e.grep(R,function(e){return e._id==t})):R}function g(){L++||T("loading",null,!0,$())}function y(){--L||T("loading",null,!1,$())}function w(e){var a=e.source||{},r=V(a.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+St++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=p(e.start=m(e.start,r)),e.end=m(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?p(e.end):null,e.allDay===t&&(e.allDay=V(a.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function b(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Mt.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}function D(e,t){return e&&t&&C(e)==C(t)}function C(e){return("object"==typeof e?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=r,x.fetchEvents=i,x.addEventSource=l,x.removeEventSource=c,x.updateEvent=u,x.renderEvent=h,x.removeEvents=v,x.clientEvents=_,x.normalizeEvent=w,x.removeEventSources=f;for(var k,M,T=x.trigger,$=x.getView,S=x.reportEvents,E={events:[]},j=[E],H=0,z=0,L=0,R=[],I=0;I<a.length;I++)d(a[I])}function s(e,t,n){return e.setFullYear(e.getFullYear()+t),n||u(e),e}function l(e,t,n){if(+e){var a=e.getMonth()+t,r=p(e);for(r.setDate(1),r.setMonth(a),e.setMonth(a),n||u(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(r>e?1:-1))}return e}function d(e,t,n){if(+e){var a=e.getDate()+t,r=p(e);r.setHours(9),r.setDate(a),e.setDate(a),n||u(e),c(e,r)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Ht)}function f(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function p(e,t){return t?u(new Date(+e)):new Date(+e)}function v(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function _(e,t){return Math.round((p(e,!0)-p(t,!0))/jt)}function g(e,n,a,r){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),a!==t&&a!=e.getMonth()&&(e.setDate(1),e.setMonth(a)),r!==t&&e.setDate(r)}function m(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),y(e,n)||(e?new Date(e):null)):null}function y(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(t||!n[13]){var r=new Date(n[1],0,1,9,0);n[3]&&(a.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),r.setDate(n[5])),c(a,r),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),c(a,r)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var i=60*Number(n[16])+(n[18]?Number(n[18]):0);i*="-"==n[15]?1:-1,a=new Date(+a+60*i*1e3)}return a}function w(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function b(e,t,n){return D(e,null,t,n)}function D(e,t,n,a){a=a||xt;var r,i,o,s,l=e,d=t,c=n.length,f="";for(r=0;c>r;r++)if(i=n.charAt(r),"'"==i){for(o=r+1;c>o;o++)if("'"==n.charAt(o)){l&&(f+=o==r+1?"'":n.substring(r+1,o),r=o);break}}else if("("==i){for(o=r+1;c>o;o++)if(")"==n.charAt(o)){var u=b(l,n.substring(r+1,o),a);parseInt(u.replace(/\D/,""),10)&&(f+=u),r=o;break}}else if("["==i){for(o=r+1;c>o;o++)if("]"==n.charAt(o)){var h=n.substring(r+1,o),u=b(l,h,a);u!=b(d,h,a)&&(f+=u),r=o;break}}else if("{"==i)l=t,d=e;else if("}"==i)l=e,d=t;else{for(o=c;o>r;o--)if(s=Lt[n.substring(r,o)]){l&&(f+=s(l,a)),r=o-1;break}o==r&&l&&(f+=i)}return f}function C(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function x(e){return e.end?k(e.end,e.allDay):d(p(e.start),1)}function k(e,t){return e=p(e),t||e.getHours()||e.getMinutes()?d(e,1):u(e)}function M(n,a,r){n.unbind("mouseover").mouseover(function(n){for(var i,o,s,l=n.target;l!=this;)i=l,l=l.parentNode;(o=i._fci)!==t&&(i._fci=t,s=a[o],r(s.event,s.element,s),e(n.target).trigger(n)),n.stopPropagation()})}function T(t,n,a){for(var r,i=0;i<t.length;i++)r=e(t[i]),r.width(Math.max(0,n-S(r,a)))}function $(t,n,a){for(var r,i=0;i<t.length;i++)r=e(t[i]),r.height(Math.max(0,n-z(r,a)))}function S(e,t){return E(e)+H(e)+(t?j(e):0)}function E(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function j(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function z(e,t){return L(e)+I(e)+(t?R(e):0)}function L(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function I(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function O(){}function A(e,t){return e-t}function F(e){return Math.max.apply(Math,e)}function Q(e){return(10>e?"0":"")+e}function Y(e,n){if(e[n]!==t)return e[n];for(var a,r=n.split(/(?=[A-Z])/),i=r.length-1;i>=0;i--)if(a=e[r[i].toLowerCase()],a!==t)return a;return e[""]}function N(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function B(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function q(e,t){var n=e.source||{},a=e.color,r=n.color,i=t("eventColor"),o=e.backgroundColor||a||n.backgroundColor||r||t("eventBackgroundColor")||i,s=e.borderColor||a||n.borderColor||r||t("eventBorderColor")||i,l=e.textColor||n.textColor||t("eventTextColor"),d=[];return o&&d.push("background-color:"+o),s&&d.push("border-color:"+s),l&&d.push("color:"+l),d.join(";")}function P(t,n,a){if(e.isFunction(t)&&(t=[t]),t){var r,i;for(r=0;r<t.length;r++)i=t[r].apply(n,a)||i;return i}}function V(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function U(e,t){function n(e,n){var f=r("left_trim_date")?Math.abs(parseInt(r("left_trim_date"))):0,u=r("right_trim_date")?Math.abs(parseInt(r("right_trim_date"))):0;f=f>28?28:f,u=u>28?28:u,f&&u&&f>u&&(_tmp=f,f=u,u=_tmp);var h=!1;r("upcoming")&&r("upcoming_trim_past")&&(h=parseInt(r("upcoming_trim_past")),h=0==h?!1:!0);var v=new Date;n&&(l(e,n),e.setDate(1));var g=r("firstDay"),m=p(e,!0);if(m.setDate(1),end=l(p(m),1),h&&end.getTime()<v.getTime())return void t.next();h=h&&m.getTime()<v.getTime(),h&&(m=new Date,e=p(m,!0),end=l(p(m),1),end.setDate(0),end.setHours(23,59,59)),f&&m.setDate(f),u&&(end=p(m),end.setDate(u),end.setHours(23,59,59));var y=p(m);d(y,-((y.getDay()-g+7)%7)),o(y);var w=p(end);d(w,(7-w.getDay()+g)%7),o(w,-1,!0);var b=s(),D=Math.ceil(_(w,y)/7);if("fixed"==r("weekMode")&&(_weeks_to_add=6-D,_weeks_to_add>0&&d(w,7*_weeks_to_add),D=6,h))var D=Math.ceil(_(w,y)/7);a.title=c(m,r("titleFormat")),a.start=m,a.end=end,a.visStart=y,a.visEnd=w,i(D,b,!0)}var a=this;a.render=n,G.call(a,e,t,"month");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=a.getCellsPerWeek,c=t.formatDate}function K(e,t){function n(e,t){t&&d(e,7*t);var n=d(p(e),-((e.getDay()-r("firstDay")+7)%7)),c=d(p(n),7),f=p(n);o(f);var u=p(c);o(u,-1,!0);var h=s();a.start=n,a.end=c,a.visStart=f,a.visEnd=u,a.title=l(f,d(p(u),-1),r("titleFormat")),i(1,h,!0)}var a=this;a.render=n,G.call(a,e,t,"basicWeek");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=a.getCellsPerWeek,l=t.formatDates}function J(e,t){function n(e,t){t&&d(e,t),o(e,0>t?-1:1);var n=p(e,!0),l=d(p(n),1);a.title=s(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=l,i(1,1,!1)}var a=this;a.render=n,G.call(a,e,t,"basicDay");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=t.formatDate}function G(t,n,a){function r(e,t,n){tt=e,nt=t,at=n,i(),Q||o(),s()}function i(){lt=pt("theme")?"ui":"fc",dt=pt("columnFormat"),ct=pt("weekNumbers"),ft=pt("weekNumberTitle"),ut="iso"!=pt("weekNumberCalculation")?"w":"W"}function o(){K=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function s(){var n=l();O&&O.remove(),O=e(n).appendTo(t),A=O.find("thead"),F=A.find(".fc-day-header"),Q=O.find("tbody"),Y=Q.find("tr"),q=Q.find(".fc-day"),P=Y.find("td:first-child"),V=Y.eq(0).find(".fc-day > div"),U=Y.eq(0).find(".fc-day-content > div"),W(A.add(A.find("tr"))),W(Y),Y.eq(0).addClass("fc-first"),Y.filter(":last").addClass("fc-last"),q.each(function(t,n){var a=xt(Math.floor(t/nt),t%nt);vt("dayRender",I,a,e(n))}),g(q)}function l(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+f()+"</table>";return e}function c(){var e,t,n=lt+"-widget-header",a="";for(a+="<thead><tr>",ct&&(a+="<th class='fc-week-number "+n+"'>"+N(ft)+"</th>"),e=0;nt>e;e++)t=xt(0,e),a+="<th class='fc-day-header fc-"+Et[t.getDay()]+" "+n+"'>"+N(Tt(t,dt))+"</th>";return a+="</tr></thead>"}function f(){var e,t,n,a=lt+"-widget-content",r="";for(r+="<tbody>",e=0;tt>e;e++){for(r+="<tr class='fc-week'>",ct&&(n=xt(e,0),r+="<td class='fc-week-number "+a+"'><div>"+N(Tt(n,ut))+"</div></td>"),t=0;nt>t;t++)n=xt(e,t),r+=h(n);r+="</tr>"}return r+="</tbody>"}function h(e){var t=lt+"-widget-content",n=I.start.getMonth(),r=u(new Date),i="",o=["fc-day","fc-"+Et[e.getDay()],t];if(e.getMonth()!=n&&o.push("fc-other-month"),+e==+r?o.push("fc-today",lt+"-state-highlight"):o.push(r>e?"fc-past":"fc-future"),i+="<td class='"+o.join(" ")+"' data-date='"+Tt(e,"yyyy-MM-dd")+"'><div>",at){switch(a){case"basicWeek":value=N(Tt(e,dt));break;default:value=e.getDate()}i+="<div class='fc-day-number'>"+value+"</div>"}return i+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function v(t){G=t;var n,a,r,i=G-A.height();"variable"==pt("weekMode")?n=a=Math.floor(i/(1==tt?2:6)):(n=Math.floor(i/tt),a=i-n*(tt-1)),P.each(function(t,i){tt>t&&(r=e(i),r.find("> div").css("min-height",(t==tt-1?a:n)-z(r)))})}function _(e){J=e,ot.clear(),st.clear(),et=0,ct&&(et=A.find("th.fc-week-number").outerWidth()),Z=Math.floor((J-et)/nt),T(F.slice(0,-1),Z)}function g(e){e.click(m).mousedown(Dt)}function m(t){if(!pt("selectable")){var n=y(e(this).data("date"));vt("dayClick",this,n,!0,t)}}function w(e,t,n){n&&rt.build();for(var a=Mt(e,t,null),r=0;r<a.length;r++){var i=a[r];g(b(i.row,i.leftCol,i.row,i.rightCol))}}function b(e,n,a,r){var i=rt.rect(e,n,a,r,t);return _t(i,t)}function D(e){return p(e)}function C(e,t){w(e,d(p(t),1),!0)}function x(){gt()}function k(e,t,n){var a=kt(e),r=q[a.row*nt+a.col];vt("dayClick",r,e,t,n)}function M(e,t){it.start(function(e){gt(),e&&b(e.row,e.col,e.row,e.col)},t)}function $(e,t,n){var a=it.stop();if(gt(),a){var r=xt(a);vt("drop",e,r,!0,t,n)}}function S(e){return p(e.start)}function E(e){return ot.left(e)}function j(e){return ot.right(e)}function H(e){return st.left(e)}function L(e){return st.right(e)}function R(e){return Y.eq(e)}var I=this;I.renderBasic=r,I.setHeight=v,I.setWidth=_,I.renderDayOverlay=w,I.defaultSelectionEnd=D,I.renderSelection=C,I.clearSelection=x,I.reportDayClick=k,I.dragStart=M,I.dragStop=$,I.defaultEventEnd=S,I.getHoverListener=function(){return it},I.colLeft=E,I.colRight=j,I.colContentLeft=H,I.colContentRight=L,I.getIsCellAllDay=function(){return!0},I.allDayRow=R,I.getRowCnt=function(){return tt},I.getColCnt=function(){return nt},I.getColWidth=function(){return Z},I.getDaySegmentContainer=function(){return K},ht.call(I,t,n,a),yt.call(I),mt.call(I),X.call(I);var O,A,F,Q,Y,q,P,V,U,K,J,G,Z,et,tt,nt,at,rt,it,ot,st,lt,dt,ct,ft,ut,pt=I.opt,vt=I.trigger,_t=I.renderOverlay,gt=I.clearOverlays,Dt=I.daySelectionMousedown,xt=I.cellToDate,kt=I.dateToCell,Mt=I.rangeToSegments,Tt=n.formatDate;B(t.addClass("fc-grid")),rt=new wt(function(t,n){var a,r,i;F.each(function(t,o){a=e(o),r=a.offset().left,t&&(i[1]=r),i=[r],n[t]=i}),i[1]=r+a.outerWidth(),Y.each(function(n,o){tt>n&&(a=e(o),r=a.offset().top,n&&(i[1]=r),i=[r],t[n]=i)}),i[1]=r+a.outerHeight()}),it=new bt(rt),ot=new Ct(function(e){return V.eq(e)}),st=new Ct(function(e){return U.eq(e)})}function X(){function e(e,t){n.renderDayEvents(e,t)}function t(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=e,n.clearEvents=t,pt.call(n)}function Z(e,t){function n(e,t){t&&d(e,7*t);var n=d(p(e),-((e.getDay()-r("firstDay")+7)%7)),c=d(p(n),7),f=p(n);o(f);var u=p(c);o(u,-1,!0);var h=s();a.title=l(f,d(p(u),-1),r("titleFormat")),a.start=n,a.end=c,a.visStart=f,a.visEnd=u,i(h)}var a=this;a.render=n,tt.call(a,e,t,"agendaWeek");var r=a.opt,i=a.renderAgenda,o=a.skipHiddenDays,s=a.getCellsPerWeek,l=t.formatDates}function et(e,t){function n(e,t){t&&d(e,t),o(e,0>t?-1:1);var n=p(e,!0),l=d(p(n),1);a.title=s(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=l,i(1)}var a=this;a.render=n,tt.call(a,e,t,"agendaDay");var r=a.opt,i=a.renderAgenda,o=a.skipHiddenDays,s=t.formatDate}function tt(n,a,r){function i(e){Lt=e,o(),Z?l():s()}function o(){Qt=Ut("theme")?"ui":"fc",Yt=Ut("isRTL"),Nt=w(Ut("minTime")),Bt=w(Ut("maxTime")),Wt=Ut("columnFormat"),qt=Ut("weekNumbers"),Pt=Ut("weekNumberTitle"),Vt="iso"!=Ut("weekNumberCalculation")?"w":"W",jt=Ut("snapMinutes")||Ut("slotMinutes")}function s(){var t,a,r,i,o,s=Qt+"-widget-header",d=Qt+"-widget-content",c=Ut("slotMinutes")%15==0;
for(l(),dt=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ut("allDaySlot")?(ct=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(dt),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ut("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",ft=e(t).appendTo(dt),ut=ft.find("tr"),D(ut.find("td")),dt.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):ct=e([]),pt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(dt),vt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(pt),_t=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(vt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),i=f(p(a),Bt),f(a,Nt),Rt=0,r=0;i>a;r++)o=a.getMinutes(),t+="<tr class='fc-slot"+r+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(c&&o?"&nbsp;":on(a,Ut("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",f(a,Ut("slotMinutes")),Rt++;t+="</tbody></table>",gt=e(t).appendTo(vt),C(gt.find("td"))}function l(){var t=c();Z&&Z.remove(),Z=e(t).appendTo(n),et=Z.find("thead"),tt=et.find("th").slice(1,-1),at=Z.find("tbody"),rt=at.find("td").slice(0,-1),it=rt.find("> div"),ot=rt.find(".fc-day-content > div"),st=rt.eq(0),lt=it.eq(0),W(et.add(et.find("tr"))),W(at.add(at.find("tr")))}function c(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+h()+_()+"</table>";return e}function h(){var e,t,n,a=Qt+"-widget-header",r="";for(r+="<thead><tr>",qt?(e=nn(0,0),t=on(e,Vt),Yt?t+=Pt:t=Pt+t,r+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+N(t)+"</th>"):r+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;Lt>n;n++)e=nn(0,n),r+="<th class='fc-"+Et[e.getDay()]+" fc-col"+n+" "+a+"'>"+N(on(e,Wt))+"</th>";return r+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}function _(){var e,t,n,a,r,i=Qt+"-widget-header",o=Qt+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",t=0;Lt>t;t++)e=nn(0,t),r=["fc-col"+t,"fc-"+Et[e.getDay()],o],+e==+s?r.push(Qt+"-state-highlight","fc-today"):r.push(s>e?"fc-past":"fc-future"),a="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=a;return l+=n,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}function g(e){e===t&&(e=kt),kt=e,sn={};var n=at.position().top,a=pt.position().top,r=Math.min(e-n,gt.height()+a+1);lt.height(r-z(st)),dt.css("top",n),pt.height(r-a-1),St=gt.find("tr:first").height()+1,Ht=Ut("slotMinutes")/jt,zt=St/Ht}function m(t){xt=t,At.clear(),Ft.clear();var n=et.find("th:first");ft&&(n=n.add(ft.find("th:first"))),n=n.add(gt.find("th:first")),Mt=0,T(n.width("").each(function(t,n){Mt=Math.max(Mt,e(n).outerWidth())}),Mt);var a=Z.find(".fc-agenda-gutter");ft&&(a=a.add(ft.find("th.fc-agenda-gutter")));var r=pt[0].clientWidth;$t=pt.width()-r,$t?(T(a,$t),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last"),Tt=Math.floor((r-Mt)/Lt),T(tt.slice(0,-1),Tt)}function y(){function e(){pt.scrollTop(a)}var t=v(),n=p(t);n.setHours(Ut("firstHour"));var a=O(t,n)+1;e(),setTimeout(e,0)}function b(){y()}function D(e){e.click(x).mousedown(en)}function C(e){e.click(x).mousedown(U)}function x(e){if(!Ut("selectable")){var t=Math.min(Lt-1,Math.floor((e.pageX-Z.offset().left-Mt)/Tt)),n=nn(0,t),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var r=parseInt(a[1])*Ut("slotMinutes"),i=Math.floor(r/60);n.setHours(i),n.setMinutes(r%60+Nt),Kt("dayClick",rt[t],n,!1,e)}else Kt("dayClick",rt[t],n,!0,e)}}function k(e,t,n){n&&It.build();for(var a=rn(e,t,null),r=0;r<a.length;r++){var i=a[r];D(M(i.row,i.leftCol,i.row,i.rightCol))}}function M(e,t,n,a){var r=It.rect(e,t,n,a,dt);return Jt(r,dt)}function S(e,t){for(var n=0;Lt>n;n++){var a=nn(0,n),r=d(p(a),1),i=new Date(Math.max(a,e)),o=new Date(Math.min(r,t));if(o>i){var s=It.rect(0,n,0,n,vt),l=O(a,i),c=O(a,o);s.top=l,s.height=c-l,C(Jt(s,vt))}}}function E(e){return At.left(e)}function j(e){return Ft.left(e)}function H(e){return At.right(e)}function L(e){return Ft.right(e)}function R(e){return Ut("allDaySlot")&&!e.row}function I(e){var t=nn(0,e.col),n=e.row;return Ut("allDaySlot")&&n--,n>=0&&f(t,Nt+n*jt),t}function O(e,n){if(e=p(e,!0),n<f(p(e),Nt))return 0;if(n>=f(p(e),Bt))return gt.height();var a=Ut("slotMinutes"),r=60*n.getHours()+n.getMinutes()-Nt,i=Math.floor(r/a),o=sn[i];return o===t&&(o=sn[i]=gt.find("tr").eq(i).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+St*(r%a/a)))}function F(){return ut}function Q(e){var t=p(e.start);return e.allDay?t:f(t,Ut("defaultEventMinutes"))}function Y(e,t){return t?p(e):f(p(e),Ut("slotMinutes"))}function q(e,t,n){n?Ut("allDaySlot")&&k(e,d(p(t),1),!0):P(e,t)}function P(t,n){var a=Ut("selectHelper");if(It.build(),a){var r=an(t).col;if(r>=0&&Lt>r){var i=It.rect(0,r,0,r,vt),o=O(t,t),s=O(t,n);if(s>o){if(i.top=o,i.height=s-o,i.left+=2,i.width-=5,e.isFunction(a)){var l=a(t,n);l&&(i.position="absolute",Dt=e(l).css(i).appendTo(vt))}else i.isStart=!0,i.isEnd=!0,Dt=e(tn({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},i)),Dt.css("opacity",Ut("dragOpacity"));Dt&&(C(Dt),vt.append(Dt),T(Dt,i.width,!0),$(Dt,i.height,!0))}}}else S(t,n)}function V(){Gt(),Dt&&(Dt.remove(),Dt=null)}function U(t){if(1==t.which&&Ut("selectable")){Zt(t);var n;Ot.start(function(e,t){if(V(),e&&e.col==t.col&&!R(e)){var a=I(t),r=I(e);n=[a,f(p(a),jt),r,f(p(r),jt)].sort(A),P(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){Ot.stop(),n&&(+n[0]==+n[1]&&K(n[0],!1,e),Xt(n[0],n[3],!1,e))})}}function K(e,t,n){Kt("dayClick",rt[an(e).col],e,t,n)}function J(e,t){Ot.start(function(e){if(Gt(),e)if(R(e))M(e.row,e.col,e.row,e.col);else{var t=I(e),n=f(p(t),Ut("defaultEventMinutes"));S(t,n)}},t)}function G(e,t,n){var a=Ot.stop();Gt(),a&&Kt("drop",e,I(a),R(a),t,n)}var X=this;X.renderAgenda=i,X.setWidth=m,X.setHeight=g,X.afterRender=b,X.defaultEventEnd=Q,X.timePosition=O,X.getIsCellAllDay=R,X.allDayRow=F,X.getCoordinateGrid=function(){return It},X.getHoverListener=function(){return Ot},X.colLeft=E,X.colRight=H,X.colContentLeft=j,X.colContentRight=L,X.getDaySegmentContainer=function(){return ct},X.getSlotSegmentContainer=function(){return _t},X.getMinMinute=function(){return Nt},X.getMaxMinute=function(){return Bt},X.getSlotContainer=function(){return vt},X.getRowCnt=function(){return 1},X.getColCnt=function(){return Lt},X.getColWidth=function(){return Tt},X.getSnapHeight=function(){return zt},X.getSnapMinutes=function(){return jt},X.defaultSelectionEnd=Y,X.renderDayOverlay=k,X.renderSelection=q,X.clearSelection=V,X.reportDayClick=K,X.dragStart=J,X.dragStop=G,ht.call(X,n,a,r),yt.call(X),mt.call(X),nt.call(X);var Z,et,tt,at,rt,it,ot,st,lt,dt,ct,ft,ut,pt,vt,_t,gt,Dt,xt,kt,Mt,Tt,$t,St,jt,Ht,zt,Lt,Rt,It,Ot,At,Ft,Qt,Yt,Nt,Bt,Wt,qt,Pt,Vt,Ut=X.opt,Kt=X.trigger,Jt=X.renderOverlay,Gt=X.clearOverlays,Xt=X.reportSelection,Zt=X.unselect,en=X.daySelectionMousedown,tn=X.slotSegHtml,nn=X.cellToDate,an=X.dateToCell,rn=X.rangeToSegments,on=a.formatDate,sn={};B(n.addClass("fc-agenda")),It=new wt(function(t,n){function a(e){return Math.max(l,Math.min(d,e))}var r,i,o;tt.each(function(t,a){r=e(a),i=r.offset().left,t&&(o[1]=i),o=[i],n[t]=o}),o[1]=i+r.outerWidth(),Ut("allDaySlot")&&(r=ut,i=r.offset().top,t[0]=[i,i+r.outerHeight()]);for(var s=vt.offset().top,l=pt.offset().top,d=l+pt.outerHeight(),c=0;Rt*Ht>c;c++)t.push([a(s+zt*c),a(s+zt*(c+1))])}),Ot=new bt(It),At=new Ct(function(e){return it.eq(e)}),Ft=new Ct(function(e){return ot.eq(e)})}function nt(){function n(e,t){var n,a=e.length,i=[],o=[];for(n=0;a>n;n++)e[n].allDay?i.push(e[n]):o.push(e[n]);m("allDaySlot")&&(et(i,t),k()),s(r(o),t)}function a(){T().empty(),E().empty()}function r(t){var n,a,r,s,l,d=Q(),c=L(),u=H(),h=e.map(t,o),v=[];for(a=0;d>a;a++)for(n=F(0,a),f(n,c),l=i(t,h,n,f(p(n),u-c)),l=at(l),r=0;r<l.length;r++)s=l[r],s.col=a,v.push(s);return v}function i(e,t,n,a){var r,i,o,s,l,d,c,f,u=[],h=e.length;for(r=0;h>r;r++)i=e[r],o=i.start,s=t[r],s>n&&a>o&&(n>o?(l=p(n),c=!1):(l=o,c=!0),s>a?(d=p(a),f=!1):(d=s,f=!0),u.push({event:i,start:l,end:d,isStart:c,isEnd:f}));return u.sort(ut)}function o(e){return e.end?p(e.end):f(p(e.start),m("defaultEventMinutes"))}function s(n,a){var r,i,o,s,d,f,u,h,p,v,_,g,w,b,D,C,x=n.length,k="",T=E(),$=m("isRTL");for(r=0;x>r;r++)i=n[r],o=i.event,s=R(i.start,i.start),d=R(i.start,i.end),f=O(i.col),u=A(i.col),h=u-f,u-=.025*h,h=u-f,p=h*(i.forwardCoord-i.backwardCoord),m("slotEventOverlap")&&(p=Math.max(2*(p-10),p)),$?(_=u-i.backwardCoord*h,v=_-p):(v=f+i.backwardCoord*h,_=v+p),v=Math.max(v,f),_=Math.min(_,u),p=_-v,i.top=s,i.left=v,i.outerWidth=p,i.outerHeight=d-s,k+=l(o,i);for(T[0].innerHTML=k,g=T.children(),r=0;x>r;r++)i=n[r],o=i.event,w=e(g[r]),b=y("eventRender",o,o,w),b===!1?w.remove():(b&&b!==!0&&(w.remove(),w=e(b).css({position:"absolute",top:i.top,left:i.left}).appendTo(T)),i.element=w,o._id===a?c(o,w,i):w[0]._fci=r,V(o,w));for(M(T,n,c),r=0;x>r;r++)i=n[r],(w=i.element)&&(i.vsides=z(w,!0),i.hsides=S(w,!0),D=w.find(".fc-event-title"),D.length&&(i.contentTop=D[0].offsetTop));for(r=0;x>r;r++)i=n[r],(w=i.element)&&(w[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",C=Math.max(0,i.outerHeight-i.vsides),w[0].style.height=C+"px",o=i.event,i.contentTop!==t&&C-i.contentTop<10&&(w.find("div.fc-event-time").text(nt(o.start,m("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),y("eventAfterRender",o,o,w))}function l(e,t){var n="<",a=e.url,r=q(e,m),i=["fc-event","fc-event-vert"];return w(e)&&i.push("fc-event-draggable"),t.isStart&&i.push("fc-event-start"),t.isEnd&&i.push("fc-event-end"),i=i.concat(e.className),e.source&&(i=i.concat(e.source.className||[])),n+=a?"a href='"+N(e.url)+"'":"div",n+=" class='"+i.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+r+"'><div class='fc-event-inner'><div class='fc-event-time'>"+N(rt(e.start,e.end,m("timeFormat")))+"</div><div class='fc-event-title'>"+N(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&b(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function c(e,t,n){var a=t.find("div.fc-event-time");w(e)&&h(e,t,a),n.isEnd&&b(e)&&v(e,t,a),C(e,t)}function u(e,t,n){function a(){l||(t.width(r).height("").draggable("option","grid",null),l=!0)}var r,i,o,s=n.isStart,l=!0,c=j(),f=Y(),u=B(),h=W(),v=L();t.draggable({opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(n,v){y("eventDragStart",t,e,n,v),K(e,t),r=t.width(),c.start(function(n,r){if(Z(),n){i=!1;var c=F(0,r.col),v=F(0,n.col);o=_(v,c),n.row?s?l&&(t.width(f-10),$(t,u*Math.round((e.end?(e.end-e.start)/zt:m("defaultEventMinutes"))/h)),t.draggable("option","grid",[f,1]),l=!1):i=!0:(X(d(p(e.start),o),d(x(e),o)),a()),i=i||l&&!o}else a(),i=!0;t.draggable("option","revert",i)},n,"drag")},stop:function(n,r){if(c.stop(),Z(),y("eventDragStop",t,e,n,r),i)a(),t.css("filter",""),U(e,t);else{var s=0;l||(s=Math.round((t.offset().top-P().offset().top)/u)*h+v-(60*e.start.getHours()+e.start.getMinutes())),J(this,e,o,s,l,n,r)}}})}function h(e,t,n){function a(){Z(),s&&(c?(n.hide(),t.draggable("option","grid",null),X(d(p(e.start),w),d(x(e),w))):(r(b),n.css("display",""),t.draggable("option","grid",[M,T])))}function r(t){var a,r=f(p(e.start),t);e.end&&(a=f(p(e.end),t)),n.text(rt(r,a,m("timeFormat")))}var i,o,s,l,c,u,h,v,w,b,D,C=g.getCoordinateGrid(),k=Q(),M=Y(),T=B(),$=W();t.draggable({scroll:!1,grid:[M,T],axis:1==k?"y":!1,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(n,a){y("eventDragStart",t,e,n,a),K(e,t),C.build(),i=t.position(),o=C.cell(n.pageX,n.pageY),s=l=!0,c=u=I(o),h=v=0,w=0,b=D=0},drag:function(e,n){var r=C.cell(e.pageX,e.pageY);if(s=!!r){if(c=I(r),h=Math.round((n.position.left-i.left)/M),h!=v){var d=F(0,o.col),f=o.col+h;f=Math.max(0,f),f=Math.min(k-1,f);var p=F(0,f);w=_(p,d)}c||(b=Math.round((n.position.top-i.top)/T)*$)}(s!=l||c!=u||h!=v||b!=D)&&(a(),l=s,u=c,v=h,D=b),t.draggable("option","revert",!s)},stop:function(n,r){Z(),y("eventDragStop",t,e,n,r),s&&(c||w||b)?J(this,e,w,c?0:b,c,n,r):(s=!0,c=!1,h=0,w=0,b=0,a(),t.css("filter",""),t.css(i),U(e,t))}})}function v(e,t,n){var a,r,i=B(),o=W();t.resizable({handles:{s:".ui-resizable-handle"},grid:i,start:function(n,i){a=r=0,K(e,t),y("eventResizeStart",this,e,n,i)},resize:function(s,l){a=Math.round((Math.max(i,t.height())-l.originalSize.height)/i),a!=r&&(n.text(rt(e.start,a||e.end?f(D(e),o*a):null,m("timeFormat"))),r=a)},stop:function(n,r){y("eventResizeStop",this,e,n,r),a?G(this,e,0,o*a,n,r):U(e,t)}})}var g=this;g.renderEvents=n,g.clearEvents=a,g.slotSegHtml=l,pt.call(g);var m=g.opt,y=g.trigger,w=g.isEventDraggable,b=g.isEventResizable,D=g.eventEnd,C=g.eventElementHandlers,k=g.setHeight,T=g.getDaySegmentContainer,E=g.getSlotSegmentContainer,j=g.getHoverListener,H=g.getMaxMinute,L=g.getMinMinute,R=g.timePosition,I=g.getIsCellAllDay,O=g.colContentLeft,A=g.colContentRight,F=g.cellToDate,Q=g.getColCnt,Y=g.getColWidth,B=g.getSnapHeight,W=g.getSnapMinutes,P=g.getSlotContainer,V=g.reportEventElement,U=g.showEvents,K=g.hideEvents,J=g.eventDrop,G=g.eventResize,X=g.renderDayOverlay,Z=g.clearOverlays,et=g.renderDayEvents,tt=g.calendar,nt=tt.formatDate,rt=tt.formatDates;g.draggableDayEvent=u}function at(e){var t,n=rt(e),a=n[0];if(it(n),a){for(t=0;t<a.length;t++)ot(a[t]);for(t=0;t<a.length;t++)st(a[t],0,0)}return lt(n)}function rt(e){var t,n,a,r=[];for(t=0;t<e.length;t++){for(n=e[t],a=0;a<r.length&&dt(n,r[a]).length;a++);(r[a]||(r[a]=[])).push(n)}return r}function it(e){var t,n,a,r,i;for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)for(r=n[a],r.forwardSegs=[],i=t+1;i<e.length;i++)dt(r,e[i],r.forwardSegs)}function ot(e){var n,a,r=e.forwardSegs,i=0;if(e.forwardPressure===t){for(n=0;n<r.length;n++)a=r[n],ot(a),i=Math.max(i,1+a.forwardPressure);e.forwardPressure=i}}function st(e,n,a){var r,i=e.forwardSegs;if(e.forwardCoord===t)for(i.length?(i.sort(ft),st(i[0],n+1,a),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-a)/(n+1),r=0;r<i.length;r++)st(i[r],0,e.forwardCoord)}function lt(e){var t,n,a,r=[];for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)r.push(n[a]);return r}function dt(e,t,n){n=n||[];for(var a=0;a<t.length;a++)ct(e,t[a])&&n.push(t[a]);return n}function ct(e,t){return e.end>t.start&&e.start<t.end}function ft(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ut(e,t)}function ut(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function ht(n,r,i){function o(t,n){var a=U[t];return e.isPlainObject(a)?Y(a,n||i):a}function s(e,t){return r.trigger.apply(r,[e,t||F].concat(Array.prototype.slice.call(arguments,2),[F]))}function l(e){var t=e.source||{};return V(e.startEditable,t.startEditable,o("eventStartEditable"),e.editable,t.editable,o("editable"))&&!o("disableDragging")}function c(e){var t=e.source||{};return V(e.durationEditable,t.durationEditable,o("eventDurationEditable"),e.editable,t.editable,o("editable"))&&!o("disableResizing")}function u(e){W={};var t,n,a=e.length;for(t=0;a>t;t++)n=e[t],W[n._id]?W[n._id].push(n):W[n._id]=[n]}function h(){W={},q={},P=[]}function v(e){return e.end?p(e.end):Q(e)}function g(e,t){P.push({event:e,element:t}),q[e._id]?q[e._id].push(t):q[e._id]=[t]}function m(){e.each(P,function(e,t){F.trigger("eventDestroy",t.event,t.event,t.element)})}function y(e,t){t.click(function(n){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:s("eventClick",this,e,n)}).hover(function(t){s("eventMouseover",this,e,t)},function(t){s("eventMouseout",this,e,t)})}function w(e,t){D(e,t,"show")}function b(e,t){D(e,t,"hide")}function D(e,t,n){var a,r=q[e._id],i=r.length;for(a=0;i>a;a++)t&&r[a][0]==t[0]||r[a][n]()}function C(e,t,n,a,r,i,o){var l=t.allDay,d=t._id;k(W[d],n,a,r),s("eventDrop",e,t,n,a,r,function(){k(W[d],-n,-a,l),B(d)},i,o),B(d)}function x(e,t,n,a,r,i){var o=t._id;M(W[o],n,a),s("eventResize",e,t,n,a,function(){M(W[o],-n,-a),B(o)},r,i),B(o)}function k(e,n,a,r){a=a||0;for(var i,o=e.length,s=0;o>s;s++)i=e[s],r!==t&&(i.allDay=r),f(d(i.start,n,!0),a),i.end&&(i.end=f(d(i.end,n,!0),a)),N(i,U)}function M(e,t,n){n=n||0;for(var a,r=e.length,i=0;r>i;i++)a=e[i],a.end=f(d(v(a),t,!0),n),N(a,U)}function T(e){return"object"==typeof e&&(e=e.getDay()),G[e]}function $(){return K}function S(e,t,n){for(t=t||1;G[(e.getDay()+(n?t:0)+7)%7];)d(e,t)}function E(){var e=j.apply(null,arguments),t=H(e),n=z(t);return n}function j(e,t){var n=F.getColCnt(),a=et?-1:1,r=et?n-1:0;"object"==typeof e&&(t=e.col,e=e.row);var i=e*n+(t*a+r);return i}function H(e){var t=F.visStart.getDay();return e+=X[t],7*Math.floor(e/K)+Z[(e%K+K)%K]-t}function z(e){var t=p(F.visStart);return d(t,e),t}function L(e){var t=R(e),n=I(t),a=O(n);return a}function R(e){return _(e,F.visStart)}function I(e){var t=F.visStart.getDay();return e+=t,Math.floor(e/7)*K+X[(e%7+7)%7]-X[t]}function O(e){var t=F.getColCnt(),n=et?-1:1,a=et?t-1:0,r=Math.floor(e/t),i=(e%t+t)%t*n+a;return{row:r,col:i}}function A(t,n,r){var i=F.getRowCnt(),o=F.getColCnt(),s=[],l=R(t),d=R(n);nextDayThreshold=U.nextDayThreshold&&""!=U.nextDayThreshold?parseInt(U.nextDayThreshold):!1,r&&r.end&&r.end.getHours&&!1!==nextDayThreshold&&d-l>1&&r.end.getHours()<=nextDayThreshold&&(d-=1);for(var c=I(l),f=I(d)-1,u=0;i>u;u++){var h=u*o,p=h+o-1,v=Math.max(c,h),_=Math.min(f,p);if(_>=v){var g=O(v),m=O(_),y=[g.col,m.col].sort(),w=H(v)==l,b=H(_)+1==d;s.push({row:u,leftCol:y[0],rightCol:y[1],isStart:w,isEnd:b})}}return e(F.element).parents(".rhcalendar.not-widget").hasClass("fc-small")?(new_segments=[],e.each(s,function(e,t){if(leftCol=t.leftCol,rightCol=t.rightCol,leftCol<rightCol)for(a=leftCol;a<=rightCol;a++){var n=jQuery.extend({},t);n.leftCol=a,n.rightCol=a,new_segments.push(n)}else new_segments.push(t)}),new_segments):s}var F=this;F.element=n,F.calendar=r,F.name=i,F.opt=o,F.trigger=s,F.isEventDraggable=l,F.isEventResizable=c,F.setEventData=u,F.clearEventData=h,F.eventEnd=v,F.reportEventElement=g,F.triggerEventDestroy=m,F.eventElementHandlers=y,F.showEvents=w,F.hideEvents=b,F.eventDrop=C,F.eventResize=x;var Q=F.defaultEventEnd,N=r.normalizeEvent,B=r.reportEventChange,W={},q={},P=[],U=r.options;F.isHiddenDay=T,F.skipHiddenDays=S,F.getCellsPerWeek=$,F.dateToCell=L,F.dateToDayOffset=R,F.dayOffsetToCellOffset=I,F.cellOffsetToCell=O,F.cellToDate=E,F.cellToCellOffset=j,F.cellOffsetToDayOffset=H,F.dayOffsetToDate=z,F.rangeToSegments=A;var K,J=o("hiddenDays")||[],G=[],X=[],Z=[],et=o("isRTL");!function(){o("weekends")===!1&&J.push(0,6);for(var t=0,n=0;7>t;t++)X[t]=n,G[t]=-1!=e.inArray(t,J),G[t]||(Z[n]=t,n++);if(K=n,!K)throw"invalid hiddenDays"}()}function pt(){function t(e,t){var n=a(e,!1,!0);_t(n,function(e,t){z(e.event,t)}),w(n,t),_t(n,function(e,t){$("eventAfterRender",e.event,e.event,t)})}function n(e,t,n){var r=a([e],!0,!1),i=[];return _t(r,function(e,a){e.row===t&&a.css("top",n),i.push(a[0])}),i}function a(t,n,a){var i,l,d=J(),u=n?e("<div/>"):d,h=r(t);return o(h),i=s(h),u[0].innerHTML=i,l=u.children(),n&&d.append(l),c(h,l),_t(h,function(e,t){e.hsides=S(t,!0)}),_t(h,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),_t(h,function(e,t){e.outerHeight=t.outerHeight(!0)}),f(h,a),h}function r(e){for(var t=[],n=0;n<e.length;n++){var a=i(e[n]);t.push.apply(t,a)}return t}function i(e){for(var t=e.start,n=x(e),a=nt(t,n,e),r=0;r<a.length;r++)a[r].event=e;return a}function o(e){for(var t=T("isRTL"),n=0;n<e.length;n++){var a=e[n],r=(t?a.isEnd:a.isStart)?U:P,i=(t?a.isStart:a.isEnd)?K:V,o=r(a.leftCol),s=i(a.rightCol);a.left=o,a.outerWidth=s-o}}function s(e){for(var t="",n=0;n<e.length;n++)t+=l(e[n]);return t}function l(e){var t="",n=T("isRTL"),a=e.event,r=a.url,i=["fc-event","fc-event-hori"];E(a)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-event-start"),e.isEnd&&i.push("fc-event-end"),i=i.concat(a.className),a.source&&(i=i.concat(a.source.className||[]));var o=q(a,T);return t+=r?"<a href='"+N(r)+"'":"<div",t+=" class='"+i.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+o+"'><div class='fc-event-inner'>",!a.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+N(G(a.start,a.end,T("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+N(a.title||"")+"</span></div>",e.isEnd&&j(a)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(r?"a":"div")+">"}function c(t,n){for(var a=0;a<t.length;a++){var r=t[a],i=r.event,o=n.eq(a),s=$("eventRender",i,i,o);s===!1?o.remove():(s&&s!==!0&&(s=e(s).css({position:"absolute",left:r.left}),o.replaceWith(s),o=s),r.element=o)}}function f(t,n){var a,a,r=(u(t),y()),i=[],o=Q(),s=(Y(),[]);for(row=0;row<o;row++)s[row]=[],_t(t,function(e){if(e.row==row&&!(e.leftCol>e.rightcol))for(col=e.leftCol;col<=e.rightCol;col++)s[row][col]=s[row][col]||0,s[row][col]+=e.outerHeight});if(n)for(var a=0;a<r.length;a++)if(r[a].length>=s[a].length)for(var l=0;l<r[a].length;l++)h=s[a]&&s[a][l]?s[a][l]:!1,!1===h?r[a].eq(l).addClass("fc-day-no-events"):r[a].eq(l).height(h);else new_h=0,e.each(s[a],function(e,t){new_h=t>new_h?t:new_h}),r[a].height(new_h);for(var a=0;a<r.length;a++)for(var l=0;l<r[a].length;l++)i[a]=i[a]||[],i[a][l]=r[a].eq(l).position().top;_t(t,function(e,t){contentTop=i[e.row][e.leftCol]||i[e.row][0],t.css("top",contentTop+e.top)})}function u(e){for(var t=Q(),n=Y(),a=[],r=v(e),i=0;t>i;i++){for(var o=r[i],s=[],l=0;n>l;l++)s.push(0);for(var d=0;d<o.length;d++){var c=o[d];c.top=F(s.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;l<=c.rightCol;l++)s[l]=c.top+c.outerHeight}a.push(F(s))}return a}function v(e){var t,n,a,r=Q(),i=[];for(t=0;t<e.length;t++)n=e[t],a=n.row,n.element&&(i[a]?i[a].push(n):i[a]=[n]);for(a=0;r>a;a++)i[a]=g(i[a]||[]);return i}function g(e){for(var t=[],n=m(e),a=0;a<n.length;a++)t.push.apply(t,n[a]);return t}function m(e){e.sort(gt);for(var t=[],n=0;n<e.length;n++){for(var a=e[n],r=0;r<t.length&&vt(a,t[r]);r++);t[r]?t[r].push(a):t[r]=[a]}return t}function y(){var e,t=Q(),n=[];for(e=0;t>e;e++)n[e]=W(e).find("div.fc-day-content > div");return n}function w(e,t){var n=J();_t(e,function(e,n,a){var r=e.event;r._id===t?b(r,n,e):n[0]._fci=a}),M(n,e,b)}function b(e,t,n){E(e)&&k.draggableDayEvent(e,t,n),n.isEnd&&j(e)&&k.resizableDayEvent(e,t,n),L(e,t)}function D(e,t){var n,a=tt();t.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(r,i){$("eventDragStart",t,e,r,i),I(e,t),a.start(function(a,r,i,o){if(t.draggable("option","revert",!a||!i&&!o),Z(),a){var s=at(r),l=at(a);n=_(l,s),X(d(p(e.start),n),d(x(e),n))}else n=0},r,"drag")},stop:function(r,i){a.stop(),Z(),$("eventDragStop",t,e,r,i),n?O(this,e,n,0,e.allDay,r,i):(t.css("filter",""),R(e,t))}})}function C(t,a,r){var i=T("isRTL"),o=i?"w":"e",s=a.find(".ui-resizable-"+o),l=!1;B(a),a.mousedown(function(e){e.preventDefault()}).click(function(e){l&&(e.preventDefault(),e.stopImmediatePropagation())}),s.mousedown(function(i){function s(n){$("eventResizeStop",this,t,n),e("body").css("cursor",""),u.stop(),Z(),c&&A(this,t,c,0,n),setTimeout(function(){l=!1},0)}if(1==i.which){l=!0;var c,f,u=tt(),h=(Q(),Y(),a.css("top")),p=e.extend({},t),v=st(ot(t.start));et(),e("body").css("cursor",o+"-resize").one("mouseup",s),$("eventResizeStart",this,t,i),u.start(function(a,i){if(a){var s=rt(i),l=rt(a);if(l=Math.max(l,v),c=it(l)-it(s)){p.end=d(H(t),c,!0);var u=f;f=n(p,r.row,h),f=e(f),f.find("*").css("cursor",o+"-resize"),u&&u.remove(),I(t)}else f&&(R(t),f.remove(),f=null);Z(),X(t.start,d(x(t),c))}},i)}})}var k=this;k.renderDayEvents=t,k.draggableDayEvent=D,k.resizableDayEvent=C;var T=k.opt,$=k.trigger,E=k.isEventDraggable,j=k.isEventResizable,H=k.eventEnd,z=k.reportEventElement,L=k.eventElementHandlers,R=k.showEvents,I=k.hideEvents,O=k.eventDrop,A=k.eventResize,Q=k.getRowCnt,Y=k.getColCnt,W=(k.getColWidth,k.allDayRow),P=k.colLeft,V=k.colRight,U=k.colContentLeft,K=k.colContentRight,J=(k.dateToCell,k.getDaySegmentContainer),G=k.calendar.formatDates,X=k.renderDayOverlay,Z=k.clearOverlays,et=k.clearSelection,tt=k.getHoverListener,nt=k.rangeToSegments,at=k.cellToDate,rt=k.cellToCellOffset,it=k.cellOffsetToDayOffset,ot=k.dateToDayOffset,st=k.dayOffsetToCellOffset}function vt(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function _t(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.element;r&&t(a,r,n)}}function gt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function mt(){function t(e,t,r){n(),t||(t=l(e,r)),d(e,t,r),a(e,t,r)}function n(e){f&&(f=!1,c(),s("unselect",null,e))}function a(e,t,n,a){f=!0,s("select",null,e,t,n,a)}function r(t){var r=i.cellToDate,s=i.getIsCellAllDay,l=i.getHoverListener(),f=i.reportDayClick;if(1==t.which&&o("selectable")){n(t);var u;l.start(function(e,t){c(),e&&s(e)?(u=[r(t),r(e)].sort(A),d(u[0],u[1],!0)):u=null},t),e(document).one("mouseup",function(e){l.stop(),u&&(+u[0]==+u[1]&&f(u[0],!0,e),a(u[0],u[1],!0,e))})}}var i=this;i.select=t,i.unselect=n,i.reportSelection=a,i.daySelectionMousedown=r;var o=i.opt,s=i.trigger,l=i.defaultSelectionEnd,d=i.renderSelection,c=i.clearSelection,f=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var a=o("unselectCancel");a&&e(t.target).parents(a).length||n(t)})}function yt(){function t(t,n){var a=i.shift();return a||(a=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),a[0].parentNode!=n[0]&&a.appendTo(n),r.push(a.css(t).show()),a}function n(){for(var e;e=r.shift();)i.push(e.hide().unbind())}var a=this;a.renderOverlay=t,a.clearOverlays=n;var r=[],i=[]}function wt(e){var t,n,a=this;a.build=function(){t=[],n=[],e(t,n)},a.cell=function(e,a){var r,i=t.length,o=n.length,s=-1,l=-1;for(r=0;i>r;r++)if(a>=t[r][0]&&a<t[r][1]){s=r;break}for(r=0;o>r;r++)if(e>=n[r][0]&&e<n[r][1]){l=r;break}return s>=0&&l>=0?{row:s,col:l}:null},a.rect=function(e,a,r,i,o){var s=o.offset();return{top:t[e][0]-s.top,left:n[a][0]-s.left,width:n[i][1]-n[a][0],height:t[r][1]-t[e][0]}}}function bt(t){function n(e){Dt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(i||(i=n),r(n,i,n.row-i.row,n.col-i.col)):r(n,i),o=n)}var a,r,i,o,s=this;s.start=function(s,l,d){r=s,i=o=null,t.build(),n(l),a=d||"mousemove",e(document).bind(a,n)},s.stop=function(){return e(document).unbind(a,n),o}}function Dt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Ct(e){function n(t){return r[t]=r[t]||e(t)}var a=this,r={},i={},o={};a.left=function(e){return i[e]=i[e]===t?n(e).position().left:i[e]},a.right=function(e){return o[e]=o[e]===t?a.left(e)+n(e).width():o[e]},a.clear=function(){r={},i={},o={}}}var xt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},kt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Mt=e.fullCalendar={version:"1.6.4"},Tt=Mt.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var a,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){var o=r[n].apply(r,i);a===t&&(a=o),"destroy"==n&&e.removeData(this,"fullCalendar")}}),a!==t?a:this}n=n||{};var o=n.eventSources||[];return delete n.eventSources,n.events&&(o.push(n.events),delete n.events),n=e.extend(!0,{},xt,n.isRTL||n.isRTL===t&&xt.isRTL?kt:{},n),this.each(function(t,a){var i=e(a),s=new r(i,n,o);i.data("fullCalendar",s),s.render()}),this},Mt.sourceNormalizers=[],Mt.sourceFetchers=[];var $t={dataType:"json",cache:!1},St=1;Mt.addDays=d,Mt.cloneDate=p,Mt.parseDate=m,Mt.parseISO8601=y,Mt.parseTime=w,Mt.formatDate=b,Mt.formatDates=D,Mt.addMonths=l;var Et=["sun","mon","tue","wed","thu","fri","sat"],jt=864e5,Ht=36e5,zt=6e4,Lt={s:function(e){return e.getSeconds()},ss:function(e){return Q(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return Q(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return Q(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return Q(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return Q(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return Q(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return C(e)}};Mt.dateFormatters=Lt,Mt.applyAll=P,Tt.month=U,Tt.basicWeek=K,Tt.basicDay=J,n({weekMode:"fixed"}),Tt.agendaWeek=Z,Tt.agendaDay=et,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e){function t(t,n,s){var l=t.success,d=e.extend({},t.data||{},{"start-min":a(n,"u"),"start-max":a(s,"u"),singleevents:!0,"max-results":9999}),c=t.currentTimezone;return c&&(d.ctz=c=c.replace(" ","_")),e.extend({},t,{url:t.url.replace(/\/basic$/,"/full")+"?alt=json-in-script&callback=?",dataType:"jsonp",data:d,startParam:!1,endParam:!1,success:function(t){var n=[];t.feed.entry&&e.each(t.feed.entry,function(t,a){var o,s=a.gd$when[0].startTime,l=r(s,!0),d=r(a.gd$when[0].endTime,!0),f=-1==s.indexOf("T");e.each(a.link,function(e,t){"text/html"==t.type&&(o=t.href,c&&(o+=(-1==o.indexOf("?")?"?":"&")+"ctz="+c))}),f&&i(d,-1),n.push({id:a.gCal$uid.value,title:a.title.$t,url:o,start:l,end:d,allDay:f,location:a.gd$where[0].valueString,description:a.content.$t})});var a=[n].concat(Array.prototype.slice.call(arguments,1)),s=o(l,this,a);return e.isArray(s)?s:n}})}var n=e.fullCalendar,a=n.formatDate,r=n.parseISO8601,i=n.addDays,o=n.applyAll;
n.sourceNormalizers.push(function(e){("gcal"==e.dataType||void 0===e.dataType&&(e.url||"").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//))&&(e.dataType="gcal",void 0===e.editable&&(e.editable=!1))}),n.sourceFetchers.push(function(e,n,a){return"gcal"==e.dataType?t(e,n,a):void 0}),n.gcalFeed=function(t,n){return e.extend({},n,{url:t,dataType:"gcal"})}}(jQuery),function(e){function t(t,a){function r(n,r){r&&d(n,7*r);var i=d(c(n),-((n.getDay()-o("firstDay")+7)%7)),u=d(c(i),7),h=c(i),p=c(u);a.options.titleFormat.week&&(a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#91;/g,"["),a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#93;/g,"]"),l.title=f(h,d(c(p),-1),a.options.titleFormat.week,a.options)),l.start=i,l.end=u,l.visStart=h,l.visEnd=p;var v=!s;v&&(e('<div class="fc-events-holder"></div>').appendTo(t),s=!0)}function i(){}function o(e){var t=options[e];return t}var s,l=this,d=e.fullCalendar.addDays,c=e.fullCalendar.cloneDate,f=e.fullCalendar.formatDates;options=a.options,n.call(l,t,a),l.render=r,l.viewChanged=i}function n(t,n){function a(e){if(e&&e.visStart&&e.visEnd){if(D.title=e.title,D.visStart=e.start,D.visEnd=e.visEnd,D.oldView=e,n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var t=new Date;D.visStart=D.visStart.getTime()>t.getTime()?D.visStart:t}var a=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if(a=""==a.replace(" ","")?1:parseInt(a),a>0){var r=new Date(D.visStart);r.setMonth(r.getMonth()+a),D.visEnd=r}var i=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if(i=""==i.replace(" ","")?0:parseInt(i),i>0){var r=new Date(D.visStart);r.setDate(r.getDate()+i-1),r.setHours(23,59,59),D.visEnd=r}}}function r(){}function i(){}function o(){}function s(){}function l(a,r){var i=n.options.eventList.stack&&1==parseInt(n.options.eventList.stack)||!1;D.direction=r,custom_delta=parseInt(n.options.eventList.delta),custom_delta=isNaN(custom_delta)?0:custom_delta,date_changed=!1,i&&custom_delta>0&&D.first_date&&D.direction<0&&a>D.first_date&&(a=fc.cloneDate(D.first_date),date_changed=!0),0==D.direction?D.first_date=fc.cloneDate(a):D.direction<0&&D.first_date<a&&(D.first_date=fc.cloneDate(a)),r&&custom_delta>0&&(fc.addDays(a,custom_delta*r),r=0),date_changed&&n.gotoDate(a),custom_delta>0?(start=fc.cloneDate(a,!0),end=fc.addDays(fc.cloneDate(start),custom_delta),_end=fc.cloneDate(end)):_end=!1,D.start=fc.cloneDate(a,!0);var o=!b;if(o&&(e('<div class="fc-events-holder"></div>').appendTo(t),b=!0),D.oldView||(D.oldView=new e.fullCalendar.views.month(e("<div>"),n)),D.oldView&&(custom_delta?D.oldView.render(fc.cloneDate(a),r):D.oldView.render(a,r),_end=!1===_end?fc.cloneDate(D.oldView.visEnd):_end,D.oldView.visStart&&D.oldView.visEnd&&(D.title=D.oldView.title,custom_delta?(D.start=fc.cloneDate(start),D.end=fc.cloneDate(end),D.visStart=fc.cloneDate(start),D.visEnd=fc.cloneDate(end)):(D.start=fc.cloneDate(D.oldView.start),D.end=fc.cloneDate(D.oldView.end),D.visStart=fc.cloneDate(D.oldView.start),D.visEnd=fc.cloneDate(D.oldView.visEnd)),n.options.eventList.TitleFormat&&(n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#91;/g,"["),n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#93;/g,"]"),D.title=fc.formatDates(fc.cloneDate(D.visStart),fc.addDays(fc.cloneDate(_end),-1),n.options.eventList.TitleFormat,n.options)))),n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var s=new Date;s.setHours(0,0,0),dayspast=n.options.widgetlist.dayspast||0,s.setDate(s.getDate()-parseInt(dayspast)),D.visStart=D.visStart.getTime()>s.getTime()?D.visStart:s}var l=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if(l=""==l.replace(" ","")?custom_delta>0?0:1:parseInt(l),l>0){var c=new Date(D.visStart);c.setMonth(c.getMonth()+l),D.visEnd=c}var f=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if(f=""==f.replace(" ","")?0:parseInt(f),f>0){var c=new Date(D.visStart);c.setDate(c.getDate()+f-1),c.setHours(23,59,59),D.visEnd=c}if(parseInt(n.options.eventList.auto)&&parseInt(n.options.eventList.stack)){var u=e(t).parents(".rhc_holder").attr("id");"undefined"==typeof e(document).data("rhc_event_scroll")&&(e(document).data("rhc_event_scroll",u),jQuery(document).scroll(function(){d(u)}))}}function d(t){if(!1!==D.have_events){var a=e("#"+t+" .fc-view-rhc_event");if(a.is(":visible")&&!D.scroll_lockdown){var r=e(a).parents(".rhc_holder"),i=r.offset();if(paddingForMobile=window.mobile?1e3:0,e(window).scrollTop()+e(window).height()==e(document).height())D.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next");else{var o=n.options.eventList.scrolloffset&&""!=n.options.eventList.scrolloffset?n.options.eventList.scrolloffset:e(window).height()/2,o=o-paddingForMobile;document_bottom=e(document).scrollTop()+e(window).height(),bottom_position=i.top+r.outerHeight(),document_bottom>bottom_position+o&&(D.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next"))}}}}function c(){}function f(){t.css("min-height","200px"),t.css("height","auto")}function h(){}function p(){}function v(a){var r=e(rhc_event_tpl),i=r.find(".fc-event-list-item").clone().removeClass("fc-remove"),o=r.find(".fc-event-list-date").clone().removeClass("fc-remove"),s=r.find(".fc-event-list-no-events").clone().removeClass("fc-remove");n.options.eventList&&n.options.eventList.eventListNoEventsText&&s.find(".fc-no-list-events-message").html(n.options.eventList.eventListNoEventsText),widget_templates=!1,n.options.eventList&&n.options.eventList.eventlist_template&&""!=n.options.eventList.eventlist_template&&e(n.options.eventList.eventlist_template).length>0&&(widget_templates=!0,i=e(n.options.eventList.eventlist_template).find(".rhc-widget-upcoming-item"));var l=n.options.eventList.stack&&"1"==n.options.eventList.stack?!0:!1;if(l&&D.direction>0)var d=t.find(".fc-events-holder");else{var d=t.find(".fc-events-holder").empty();D.rendered_events=[]}if(r.appendTo(d).find(".fc-remove").remove(),l&&e(d).find(".fc-event-list-no-events").parents(".fc-event-list-container").remove(),a.length>0)if(D.have_events=!0,widget_templates){var c=n.options,f=n.options.widgetlist,h=a,p="#"+f.sel;f.dayspast=f.dayspast?f.dayspast:0;var v=e.fullCalendar.parseDate(f.end);if(!f.horizon||"hour"!=f.horizon&&"end"!=f.horizon){var m=[],b=new Date;b.setDate(b.getDate()-f.dayspast),f.historic&&""!=f.specific_date&&(b=e.fullCalendar.parseDate(f.specific_date));for(var C=0;C<h.length;C++){var x=new Date(h[C].start);b.setHours(0,0,0,0),x.setHours(0,0,0,0),x.getTime()<b.getTime()||x.getTime()>v.getTime()||(m[m.length]=h[C])}h=m}else{var m=[],b=new Date;b.setDate(b.getDate()-f.dayspast),f.historic&&"1"==f.historic&&(b=e.fullCalendar.parseDate(f.specific_date));for(var C=0;C<h.length;C++){if(h[C].end&&"end"==f.horizon){if(h[C].end.getTime()<b.getTime())continue}else if(h[C].start.getTime()<b.getTime())continue;h[C].start.getTime()>v.getTime()||(m[m.length]=h[C])}h=m}if(h.sort(_rhc_sort_events),f.premiere&&"1"==f.premiere){for(var m=[],C=0;C<h.length;C++)h[C].premiere&&(m[m.length]=h[C]);h=m}else if(f.premiere&&"2"==f.premiere){for(var k=[],m=[],C=0;C<h.length;C++)e.inArray(h[C]._id,k)>-1||(k.push(h[C]._id),m.push(h[C]));h=m}h=h.slice(0,f.number);var M=[];e.each(h,function(t,n){var a=i.clone(),o=n,s=o.description.split(" ");s=s.slice(0,f.words),o.description=s.join(" "),f.using_calendar_url&&""!=f.using_calendar_url&&(o.url=f.using_calendar_url);var l=o.url,d=i.clone();if(d.find(".rhc-title-link").html(o.title).data("rhc_event",o).attr("href",l).end().find(".rhc-event-link").data("rhc_event",o).attr("href",l).end().find(".rhc-description").html(o.description).end().find(".rhc-widget-date").html("").end().find(".rhc-widget-time").html("").end().find(".rhc-widget-end-date").html("").end().find(".rhc-widget-end-time").html("").end(),""!=f.fcdate_format){d.find(".rhc-widget-date").html(e.fullCalendar.formatDate(o.start,f.fcdate_format,c)),d.find(".rhc-widget-end-date").html(e.fullCalendar.formatDate(o.end,f.fcdate_format,c)),dstart=e.fullCalendar.formatDate(o.start,"yyyy-MM-dd",c),dend=e.fullCalendar.formatDate(o.end,"yyyy-MM-dd",c);var u=Math.floor((Date.parse(dend)-Date.parse(dstart))/864e5);u>0?(m=e.fullCalendar.formatDate(o.start,f.fcdate_format,c)+" &#8211; "+e.fullCalendar.formatDate(o.end,f.fcdate_format,c),d.find(".rhc-widget-date-range").html(m),d.find(".rhc-day_diff0").hide()):(d.find(".rhc-widget-date-range").html(e.fullCalendar.formatDate(o.start,f.fcdate_format,c)),d.find(".rhc-day_diff1").hide())}""==f.fctime_format||o.allDay||(d.find(".rhc-widget-time").html(e.fullCalendar.formatDate(o.start,f.fctime_format,c)),d.find(".rhc-widget-end-time").html(e.fullCalendar.formatDate(o.end,f.fctime_format,c))),o.allDay&&(d.addClass("fc-is-allday"),d.find(".rhc-widget-time").hide()),d.find(".rhc-date-start").each(function(t,n){e(n).html(e.fullCalendar.formatDate(o.start,e(n).html(),c))});var h=e.fullCalendar.formatDate(o.start,"yyyyMMdd",c);-1==e.inArray(h,M)?M.push(h):d.find(".hide-repeat-date").addClass("repeated-date"),1==f.showimage?(d.addClass("featured-1"),o.image&&o.image[0]&&""!=o.image[0]&&e("<a></a>").addClass("rhc-image-link").data("rhc_event",o).attr("href",l).append(e("<img></img>").attr("src",o.image[0])).appendTo(d.find(".rhc-widget-upcoming-featured-image"))):(d.addClass("featured-0"),d.find(".rhc-widget-upcoming-featured-image").remove()),e(d).find(".rhc-title-link,.rhc-event-link,.rhc-image-link").click(function(){var e={url:o.url};return o.gotodate&&(e.gotodate=o.gotodate),o.event_rdate&&(e.event_rdate=o.event_rdate),_rhc_widget_link_click(e,this)}),a=d,a.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),n.terms&&n.terms.length>0&&e.each(n.terms,function(t,n){if(a.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&a.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),a.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var r="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",r).attr("target","_blank").appendTo(a.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}for(var i in n)"taxonomy"!=i&&(term_property_value=n[i],a.find(".taxonomy-"+n.taxonomy+"-"+i).length>0&&""!=term_property_value&&e("<span>"+term_property_value+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy+"-"+i)))}),d.find(".move-out").length>0&&d.find(".move-out").appendTo(p),triggerRes=g("eventRender",n,n,d),!1===triggerRes||r.find(".fc-event-list-holder").append(d),g("loading",null,!1)})}else{n.options.widgetlist.dayspast=n.options.widgetlist.dayspast?n.options.widgetlist.dayspast:0,events=[];var T=new Date;if(T.setDate(T.getDate()-n.options.widgetlist.dayspast),e.each(a,function(e,t){if(l&&D.rendered_events.length>0)for(var a=0;a<D.rendered_events.length;a++)if(test_event=D.rendered_events[a],"function"==typeof test_event.start.getTime&&"function"==typeof t.start.getTime&&test_event.id==t.id&&test_event.start.getTime()==t.start.getTime())return;if(D.rendered_events.push(t),!(n.options.eventList&&1==parseInt(n.options.eventList.removeended)&&null!=t.end&&t.end<T)){if(n.options.eventList&&"1"==n.options.eventList.outofrange){if(null!=t.end&&t.end<D.visStart)return}else{if(t.start<D.visStart)return;if(t.start>D.visEnd)return}events[events.length]=t}}),0==events.length)return;events.sort("1"==n.options.eventList.reverse?w:y);var $=[],S=n.options.eventList.extendedDetails&&"1"==n.options.eventList.extendedDetails?!0:!1,E="",M=[];if(e.each(events,function(t,a){if(!("undefined"!=typeof n.options.eventList.display&&n.options.eventList.display>0&&t>=n.options.eventList.display)){var s=i.clone();a.gcal||""==a.url?s.find(".fc-event-list-title").parent().empty().append(e("<span></span>").addClass("fc-event-list-title").html(a.title)):a.direct_link?s.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("href",a.url).end():s.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("target","").attr("href","javascript:void(0);").bind("click",function(e){var t=n.options.eventClick?n.options.eventClick:fc_click;t(a,e,D)}).end();var l=a.local_feed?!0:!1;if(S&&l&&(s.find(".fe-extrainfo-container").addClass("skip-render").addClass("ext_det_"+a.id).hide().data("ev",a).before('<div class="ext-list-loading loading-events"><div class="ext-list-loading-1 ajax-loader loading-events"><div class="ext-list-loading-2x xspinner icon-xspinner-3"></div></div></div>'),-1==e.inArray(a.id,$)&&$.push(a.id)),s.find(".fc-event-list-description").html(a.description).end(),a.description&&""==a.description.replace(" ","")&&s.find(".fc-event-list-description").addClass("rhc-empty-description"),"none"==a.fc_click_link&&s.find("a.fc-event-link").addClass("fc-no-link"),a.image&&a.image[0]?s.find("img.fc-event-list-image").attr("src",a.image[0]):s.find(".fc-event-list-featured-image").empty(),a.allDay){s.find(".fc-time").remove();var d=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}else{s.find(".fc-time").html(e.fullCalendar.formatDate(a.start,"h:mmtt"));var d=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}if(a.start?s.find(".fc-start").html(e.fullCalendar.formatDate(a.start,d,n.options)):s.find(".fc-start").remove(),a.end?s.find(".fc-end").html(e.fullCalendar.formatDate(a.end,d,n.options)):s.find(".fc-end").parent().addClass("rhc_event-empty-taxonomy").end().remove(),s.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),a.terms&&a.terms.length>0&&e.each(a.terms,function(t,n){if(s.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&s.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&s.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(s.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end()):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(s.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end())),s.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){s.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&s.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(s.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}}),a.meta&&a.meta.length>0&&e.each(a.meta,function(e,t){p=".fc-event-meta-"+t[0],val=t[1],s.find(p).html(val).end()}),triggerRes=g("eventRender",a,a,s),!1===triggerRes);else{if(n.options.eventList.ShowHeader&&1==parseInt(n.options.eventList.ShowHeader)){var c=a.start;if(e.fullCalendar.formatDate(c,"yyyyMMdd")!=e.fullCalendar.formatDate(E,"yyyyMMdd")){E=c;var f=o.clone();f.find(".fc-event-list-date-header").html(e.fullCalendar.formatDate(a.start,n.options.eventList.DateFormat||"dddd MMMM d, yyyy",n.options)),r.find(".fc-event-list-holder").append(f)}}r.find(".fc-event-list-holder").append(s)}}}),$.length>0){"undefined"==typeof n.extended_detail_cache&&(n.extended_detail_cache={});var j=[];if(e.each($,function(e,t){"undefined"==typeof n.extended_detail_cache[t]&&j.push(t)}),0==j.length)_(e,$,r,n);else{url=RHC.ajaxurl,url+="?rhc_action=extended_details",$.length>0&&e.each($,function(e,t){url=url+"&ids[]="+t}),ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:T.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u;var H={url:url,type:"GET",dataType:"html",not_used_data:{rhc_action:"extended_details",ids:$},success:function(a){e.each($,function(r,i){e(a).find("."+i).length>0?n.extended_detail_cache[i]=e(a).find("."+i).clone():e(t).find(".skip-render.ext_det_"+i).removeClass("skip-render").removeClass("ext_det_"+i).fadeIn("fast").parent().find(".ext-list-loading").fadeOut("fast")}),_(e,$,r,n)},error:function(){e(t).find(".skip-render").show(),e(t).parent().find(".ext-list-loading").fadeOut("fast"),_(e,$,r,n)}};e.ajax(H)}}}else D.have_events=!1,r.find(".fc-event-list-holder").append(s),r.find(".fc-no-list-events-message").show();g("loading",null,!1)}function _(e,t,n,a){e.each(t,function(t,r){"undefined"!=typeof a.extended_detail_cache[r]&&n.find(".ext_det_"+r).each(function(t,n){var i=a.extended_detail_cache[r].clone(),o=e(n).data("ev");if(i.find(".postmeta-fc_start .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_start_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_start_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".postmeta-fc_end .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_end_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_end_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".fc-button-social-panels").length>0){var s=i.find(".fc-button-social-panels");new_rhp_vars=s.data("rhp_vars"),new_rhp_vars.shareLink=o.url,new_rhp_vars.shareRedirectURI=o.url,s.data("rhp_vars",new_rhp_vars)}i.find(".fe-image-holder").RHCLink(o,e(n).closest(".fullCalendar").fullCalendar("getView")),original=e(n).replaceWith(i),i.parent().find(".ext-list-loading").fadeOut("fast")})}),e("BODY").trigger("dbox.loaded")}function g(e,t){return n.trigger.apply(n,[e,t||D].concat(Array.prototype.slice.call(arguments,2),[D]))}function m(t,n){t?(D.scroll_lockdown=!0,e(n.element).parents(".rhc_holder").addClass("stacking-loading")):(D.scroll_lockdown=!1,e(n.element).parents(".rhc_holder").removeClass("stacking-loading"))}function y(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function w(e,t){return e.start<t.start?1:e.start>t.start?-1:0}var b,D=this;D.name="rhc_event",D.render=l,D.unselect=c,D.setHeight=f,D.setWidth=h,D.clearEvents=p,D.renderEvents=v,D.trigger=g,D.viewChanged=a,D.beforeAnimation=s,D.setEventData=r,D.clearEventData=i,D.triggerEventDestroy=o,D.element=t,D.oldView=null,D.calendar=n,fc=e.fullCalendar,D.direction=0,D.first_date=null,D.scroll_lockdown=!1,D.loading=m,D.have_events=!1,D.rendered_events=[],n.options.eventList.daysahead&&parseInt(n.options.eventList.delta)>parseInt(n.options.eventList.daysahead)&&(n.options.eventList.delta=n.options.eventList.daysahead)}function a(t,n){function a(){}function r(){}function i(n){h.start=n;var a=!u;a&&(e('<div class="fc-detail-view-holder"><div class="fc-detail-view-content">TODO: a single event details. The button will be removed on the top right controls, and this view will be triggered when selecting an event.</div><div class="fc-detail-view-wp_footer" style="display:none;"></div></div>').appendTo(t),u=!0)}function o(){}function s(){t.css("min-height","200px"),t.css("height","auto")}function l(){}function d(){e(".fc-detail-view-content").html("")}function c(){var t={id:n.last_clicked_event.id};e.post(n.options.singleSource,t,function(t){"OK"==t.R&&(0==e("body .fc-single-item-holder").length&&e("body").append('<div class="fc-single-item-holder"></div>'),e("body .fc-single-item-holder").empty(),e(t.DATA.footer).each(function(t,n){if(n.nodeName&&"SCRIPT"==n.nodeName){var a=document.createElement("script");e(n).attr("type")&&(a.type=e(n).attr("type")||""),e(n).attr("src")?a.src=e(n).attr("src")||"":a.text=e(n).html()||"",document.body.appendChild(a)}else e("body .fc-single-item-holder").append(n)}),e(".fc-detail-view-content").html(t.DATA.body))},"json")}function f(){}var u,h=this;h.name="rhc_detail",h.render=i,h.unselect=o,h.setHeight=s,h.setWidth=l,h.clearEvents=d,h.renderEvents=c,h.trigger=f,h.viewChanged=a,h.beforeAnimation=r,h.element=t}e.fullCalendar.views.WeekEventList=t,e.fullCalendar.views.rhc_event=n,e.fullCalendar.views.rhc_detail=a}(jQuery);var CryptoJS=CryptoJS||function(e,t){var n={},a=n.lib={},r=function(){},i=a.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var r=0;e>r;r++)t[a+r>>>2]|=(n[r>>>2]>>>24-8*(r%4)&255)<<24-8*((a+r)%4);else if(65535<n.length)for(r=0;e>r;r+=4)t[a+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],a=0;t>a;a+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;e>a;a++){var r=t[a>>>2]>>>24-8*(a%4)&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;t>a;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-4*(a%8);return new o.init(n,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;e>a;a++)n.push(String.fromCharCode(t[a>>>2]>>>24-8*(a%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;t>a;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-8*(a%4);return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,a=n.words,r=n.sigBytes,i=this.blockSize,s=r/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,r=e.min(4*t,r),t){for(var l=0;t>l;l+=i)this._doProcessBlock(a,l);l=a.splice(0,t),n.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);!function(e){function t(e,t,n,a,r,i,o){return e=e+(t&n|~t&a)+r+o,(e<<i|e>>>32-i)+t}function n(e,t,n,a,r,i,o){return e=e+(t&a|n&~a)+r+o,(e<<i|e>>>32-i)+t}function a(e,t,n,a,r,i,o){return e=e+(t^n^a)+r+o,(e<<i|e>>>32-i)+t}function r(e,t,n,a,r,i,o){return e=e+(n^(t|~a))+r+o,(e<<i|e>>>32-i)+t}for(var i=CryptoJS,o=i.lib,s=o.WordArray,l=o.Hasher,o=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=i+o,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,s=e[i+0],l=e[i+1],c=e[i+2],f=e[i+3],u=e[i+4],h=e[i+5],p=e[i+6],v=e[i+7],_=e[i+8],g=e[i+9],m=e[i+10],y=e[i+11],w=e[i+12],b=e[i+13],D=e[i+14],C=e[i+15],x=o[0],k=o[1],M=o[2],T=o[3],x=t(x,k,M,T,s,7,d[0]),T=t(T,x,k,M,l,12,d[1]),M=t(M,T,x,k,c,17,d[2]),k=t(k,M,T,x,f,22,d[3]),x=t(x,k,M,T,u,7,d[4]),T=t(T,x,k,M,h,12,d[5]),M=t(M,T,x,k,p,17,d[6]),k=t(k,M,T,x,v,22,d[7]),x=t(x,k,M,T,_,7,d[8]),T=t(T,x,k,M,g,12,d[9]),M=t(M,T,x,k,m,17,d[10]),k=t(k,M,T,x,y,22,d[11]),x=t(x,k,M,T,w,7,d[12]),T=t(T,x,k,M,b,12,d[13]),M=t(M,T,x,k,D,17,d[14]),k=t(k,M,T,x,C,22,d[15]),x=n(x,k,M,T,l,5,d[16]),T=n(T,x,k,M,p,9,d[17]),M=n(M,T,x,k,y,14,d[18]),k=n(k,M,T,x,s,20,d[19]),x=n(x,k,M,T,h,5,d[20]),T=n(T,x,k,M,m,9,d[21]),M=n(M,T,x,k,C,14,d[22]),k=n(k,M,T,x,u,20,d[23]),x=n(x,k,M,T,g,5,d[24]),T=n(T,x,k,M,D,9,d[25]),M=n(M,T,x,k,f,14,d[26]),k=n(k,M,T,x,_,20,d[27]),x=n(x,k,M,T,b,5,d[28]),T=n(T,x,k,M,c,9,d[29]),M=n(M,T,x,k,v,14,d[30]),k=n(k,M,T,x,w,20,d[31]),x=a(x,k,M,T,h,4,d[32]),T=a(T,x,k,M,_,11,d[33]),M=a(M,T,x,k,y,16,d[34]),k=a(k,M,T,x,D,23,d[35]),x=a(x,k,M,T,l,4,d[36]),T=a(T,x,k,M,u,11,d[37]),M=a(M,T,x,k,v,16,d[38]),k=a(k,M,T,x,m,23,d[39]),x=a(x,k,M,T,b,4,d[40]),T=a(T,x,k,M,s,11,d[41]),M=a(M,T,x,k,f,16,d[42]),k=a(k,M,T,x,p,23,d[43]),x=a(x,k,M,T,g,4,d[44]),T=a(T,x,k,M,w,11,d[45]),M=a(M,T,x,k,C,16,d[46]),k=a(k,M,T,x,c,23,d[47]),x=r(x,k,M,T,s,6,d[48]),T=r(T,x,k,M,v,10,d[49]),M=r(M,T,x,k,D,15,d[50]),k=r(k,M,T,x,h,21,d[51]),x=r(x,k,M,T,w,6,d[52]),T=r(T,x,k,M,f,10,d[53]),M=r(M,T,x,k,m,15,d[54]),k=r(k,M,T,x,l,21,d[55]),x=r(x,k,M,T,_,6,d[56]),T=r(T,x,k,M,C,10,d[57]),M=r(M,T,x,k,p,15,d[58]),k=r(k,M,T,x,b,21,d[59]),x=r(x,k,M,T,u,6,d[60]),T=r(T,x,k,M,y,10,d[61]),M=r(M,T,x,k,c,15,d[62]),k=r(k,M,T,x,g,21,d[63]);o[0]=o[0]+x|0,o[1]=o[1]+k|0,o[2]=o[2]+M|0,o[3]=o[3]+T|0},_doFinalize:function(){var t=this._data,n=t.words,a=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(a/4294967296);for(n[(r+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(r+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,a=0;4>a;a++)r=n[a],n[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=l._createHelper(o),i.HmacMD5=l._createHmacHelper(o)}(Math),function($){function allday_group(e,t){return _allday_group="undefined"!=typeof t.allday_group&&0<parseInt(t.allday_group)?parseInt(t.allday_group):0,0<_allday_group&&$.each(e,function(e,t){"undefined"!=typeof t.color&&""!=t.color&&(1==_allday_group?t.title='<span style="display:none;">'+t.color+"</span>"+t.title:2==_allday_group&&"undefined"!=typeof t.menu_order&&(t.title='<span style="display:none;">'+parseInt(t.menu_order)+"</span>"+t.title))}),e}function preload_events(o,fc_options){$(o).find(".rhc-preload").length&&$(o).find(".rhc-preload").each(function(i,el){if(!$(el).data("preloaded")){$(el).data("preloaded",!0);try{if(cache=$(el).data("request"),cache=eval(cache),cache)if($(el).data("events")?(tmp_events=$(el).data("events"),data=eval(tmp_events)):data=$.parseJSON($(el).html()),external_source=$(el).data("external_source")||!1,"OK"==data.R){if(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url)){cache.events=data.EVENTS;var events=[];start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=rhc_events_to_fc_events(start,end,data,!0),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}else if(external_source&&"object"==typeof data&&(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url))){cache.events=data.EVENTS;var events=data;start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}catch(e){}}})}function in_rhc_events_cache(e,t,n){for(var a=0;a<rhc_events_cache.length;a++)if(rhc_events_cache[a].start<=e&&rhc_events_cache[a].end>=t&&rhc_events_cache[a].url==n)return!0;return!1}function handle_local_tz(e,t,n){if(local_tz="local_tz"in t?parseInt(t.local_tz):0,0==local_tz)return e;if("GMT_OFFSET"in n){var a=-1*n.GMT_OFFSET*60,r=(new Date).getTimezoneOffset();if(a==r)return e;for(var i=0;i<e.length;i++)if(!e[i].allDay){"object"==typeof e[i].start&&(e[i].start=date_change_offset(e[i].start,a)),"object"==typeof e[i]._start&&(e[i]._start=date_change_offset(e[i]._start,a)),"object"==typeof e[i].end&&(e[i].end=date_change_offset(e[i].end,a)),"object"==typeof e[i]._end&&(e[i]._end=date_change_offset(e[i]._end,a));var o=jQuery.fullCalendar.formatDate(e[i].start,"yyyyMMddHHmmss"),s=jQuery.fullCalendar.formatDate(e[i].end,"yyyyMMddHHmmss");o&&""!=o&&(s&&""!=s&&(o=o+","+s),e[i].event_rdate=o,e[i].url=""==e[i].url?"":_add_param_to_url(e[i].url,"event_rdate",e[i].event_rdate))}}return e}function date_change_offset(e,t){return new Date(e.getTime()-6e4*(e.getTimezoneOffset()-t))}function handle_field_map(e){return e.MAP&&e.MAP.length>0&&e.EVENTS&&e.EVENTS.length>0&&(new_events=[],jQuery.each(e.EVENTS,function(t,n){new_ev={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_ev[t[1]]=n[t[0]])}),"undefined"==typeof new_ev.allDay&&(new_ev.allDay=!1),new_ev.terms&&new_ev.terms.length>0&&(new_terms=[],jQuery.each(new_ev.terms,function(t,n){new_terms[t]="object"==typeof n?n:e.TERMS[n]}),new_ev.terms=new_terms,new_terms=[],jQuery.each(new_ev.terms,function(t,n){new_term={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_term[t[1]]=n[t[0]])}),new_terms[new_terms.length]=new_term}),new_ev.terms=new_terms),new_events[new_events.length]=new_ev}),e.EVENTS=new_events),e}function rhc_events_to_fc_events(e,t,n,a){var r=[];return n=handle_field_map(n),n.EVENTS.length>0&&$(n.EVENTS).each(function(n,i){if(i.premiere=!0,i.description="undefined"==typeof i.description?"":i.description,i.local_feed="undefined"==typeof i.local_feed?a:i.local_feed,i.color&&(""==i.color||"#"==i.color)&&i.terms&&i.terms.length>0)for(var o=0;o<i.terms.length;o++){var s=i.terms[o].background_color&&i.terms[o].background_color.length>1?i.terms[o].background_color:!1,l=i.terms[o].color&&i.terms[o].color.length>1?i.terms[o].color:!1;if(l=s&&!1===l?"#fff":l,s=l&&!1===s?"#fff":s,s&&l){i.color=s,i.textColor=l;break}}if("undefined"!=typeof i.start&&null!=i.start)if(i.src_start=i.start,i.fc_rrule=i.fc_rrule?i.fc_rrule:"",""==i.fc_rrule&&""==i.fc_rdate)r[r.length]=i;else{var d=!1,c=new Date($.fullCalendar.parseDate(i.start));if(i.end){var f=new Date($.fullCalendar.parseDate(i.end));d=f.getTime()-c.getTime()}var u=$.fullCalendar.parseDate(i.start);if(i.fc_rrule=""==i.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":i.fc_rrule,scheduler=new Scheduler(u,i.fc_rrule,!0),""!=i.fc_interval&&i.fc_exdate){var h=exdate_to_array_of_dates(i.fc_exdate);h.length>0&&scheduler.add_exception_dates(h)}if(i.fc_rdate&&""!=i.fc_rdate){var p=exdate_to_array_of_dates(i.fc_rdate);p.length>0&&scheduler.add_rdates(p)}occurrences=scheduler.occurrences_between(e,t),occurrences.length>0&&$(occurrences).each(function(e,t){var n=new Date(t),a=$.extend(!0,{},i);if(a.premiere=n.getTime()==c.getTime(),a._start=n,a.start=n,a.fc_start=$.fullCalendar.formatDate(n,"yyyy-MM-dd"),a.fc_start_time=$.fullCalendar.formatDate(n,"HH:mm:ss"),a.fc_date_time=$.fullCalendar.formatDate(n,"yyyy-MM-dd HH:mm:ss"),d){var o=n.getTime()+d,s=new Date;
s.setTime(o),a._end=s,a.end=s,a.fc_end=$.fullCalendar.formatDate(s,"yyyy-MM-dd"),a.fc_end_time=$.fullCalendar.formatDate(s,"HH:mm:ss")}else a.end=a.start,a._end=a._start;a.repeat_instance=!0,a=_add_repeat_instance_data_to_event(a),r[r.length]=a}),e>c&&f>e&&(i.start=c,i.end=f,r[r.length]=i)}}),r}function cb_event_render(e,t,n,a,r,i){if(e||(e=$(r.element).parents(".fullCalendar")),showothermonth=i&&i.showothermonth?parseInt(i.showothermonth):1,showothermonth=r&&r.name&&"month"==r.name?showothermonth:1,"month"==r.name&&$(a).parents(".rhcalendar.not-widget").hasClass("fc-small")&&(showothermonth=0),0==showothermonth&&n.start&&n.end&&r.start&&r.end){if(n.end.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(0==showothermonth&&n.start&&null==n.end&&r.start&&r.end){if(n.start.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(event_skip=i&&i.event_skip?parseInt(i.event_skip):0,event_skip&&("undefined"==typeof r.event_skip&&(r.event_skip=event_skip),r.event_skip>0))return r.event_skip--,!1;if(norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&n&&n.id){if(r.rendered=r.rendered?r.rendered:[],-1!=$.inArray(n.id,r.rendered))return!1;r.rendered.push(n.id)}if(i.taxonomycolor&&"1"==i.taxonomycolor&&n.terms){var o=[];$.each(n.terms,function(e,t){str="tax_"+t.taxonomy+"_"+t.slug,str=str.replace(/ /g,"_"),o.push(str)}),o.length>0&&$(a).addClass(o.join(" "))}if(1==parseInt(i.upcoming)){var s=new Date;if(n.allDay&&s.setHours(0,0,0,0),n.start.getTime()<s.getTime())return!1}if(n.venue_directory&&"rhc_gmap"!=r.name)return!1;if("rhc_gmap"==r.name&&n.start)if(1==parseInt(i.gmap_view.upcoming)){if(n.start.getTime()<r.visStart.getTime())return!1}else if(n.end&&2==parseInt(i.gmap_view.upcoming)&&n.end.getTime()<r.visStart.getTime())return!1;var l=$(e).data("rhc_tax_filters");if(l&&l.length>0){var d=!0,c=[],f=[];if($.each(n.terms,function(e,t){$.each(l,function(e,n){-1==$.inArray(n.taxonomy,f)&&f.push(n.taxonomy),n.taxonomy==t.taxonomy&&(t.gaddress&&t.gaddress==n.term?(d=!1,c.push(t.taxonomy)):t.description&&t.description==n.term?(d=!1,c.push(t.taxonomy)):t.name&&t.name==n.term&&(d=!1,c.push(t.taxonomy)))})}),!d&&f.length>0&&$.each(f,function(e,t){-1==$.inArray(t,c)&&(d=!0)}),d)return!1}if(max_events=i&&i.max_events?parseInt(i.max_events):0,max_events){if("undefined"==typeof r.max_events&&(r.max_events=max_events,r.rendered_events_count=0),r.rendered_events_count>=r.max_events)return!1;r.rendered_events_count++}if(t){var u=0;if(n.start&&n.end){var h=new Date(n.start),p=new Date(n.end);h.setHours(0,0,0,0),p.setHours(0,0,0,0),u=Math.floor((p.getTime()-h.getTime())/864e5)}var v=n._start.getDate();if(0==u)$(r.element).find(".fc-day-number").each(function(e,t){v==$(t).html()&&(n.start.getMonth()==r.start.getMonth()?$(t).parent().parent().hasClass("fc-other-month")||$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"):$(t).parent().parent().hasClass("fc-other-month")&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"))});else{var h=new Date(n.start),p=new Date(n.start);h.setHours(0,0,0),p.setHours(23,59,59),$(r.element).find(".fc-day-number").each(function(e,t){current_date_str=$(t).closest(".fc-day").data("date"),current_date=new Date(current_date_str+"T00:00:00Z"),current_date.setTime(current_date.getTime()+60*h.getTimezoneOffset()*1e3),current_date.getTime()<=p.getTime()&&current_date.getTime()>=h.getTime()&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none")})}return!1}if(sidelist_events.push(n),i.matchBackground&&"1"==i.matchBackground){loop_date=new Date(n._start),compare_date=n._end||n._start;for(var _=0;loop_date<=compare_date&&(sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",original_bg=$(r.element).find(sel).css("background-color"),$(r.element).find(sel).data("original_bg",original_bg).addClass("bg_matched").css("background-color",$(a).length&&$(a).get(0).tagName?$(a).css("background-color")||"":""),loop_date.setDate(loop_date.getDate()+1),!(_++>5e3)););}i.month_event_image&&"1"==i.month_event_image&&"month"==r.name&&n.month_image&&n.month_image[0]&&(loop_date=new Date(n._start),sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",ratio=n.month_image[2]/n.month_image[1],container_w=r.element.find(sel).outerWidth(),_w=container_w,_h=_w*ratio,$(a).addClass("has-fc-image").find(".fc-event-inner").prepend($("<div></div>").addClass("fc-image-cont").append($("<img />").attr("src",n.month_image[0]).attr("height",parseInt(_h)).css("height",parseInt(_h)).addClass("fc-image")))),i.early_dynamic_tooltip&&"1"==i.early_dynamic_tooltip&&cb_event_mouseover(n,null,r),i.tooltip_close_on_title_leave&&parseInt(i.tooltip_close_on_title_leave)&&$(a).mouseleave(function(){handle=setTimeout(function(){0==$(".fc-event.event-hovered").length&&$(".fct-tooltip").is(":visible")&&($(".fct-tooltip:visible").first().is(":hover")||$(".fct-tooltip:visible").trigger("close-tooltip"))},200)})}function hide_widget_event_list(e){var t=jQuery(e).parents(".rhc_holder").find(".rhc_calendar_widget_day_click_holder");t.children().length>0&&t.children().fadeOut("fast",function(){})}function cb_event_render_all(e,t,n,a,r,i){if("undefined"==typeof e&&(e=$(r.element).parents(".rhcalendar.rhc_holder")),norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&(r.rendered=r.handle_rendered?r.handle_rendered():[]),has_sidelist_holder=$(e).parent().find(".rhc-sidelist").length>0?!0:!1,events=sidelist_events||[],events.length>0){var o=$(e).parent().find(".rhc-sidelist-holder .rhc-sidelist-tab-label");o.length>0&&i.sidelist&&i.sidelist.labels&&i.sidelist.labels.tab&&o.html(i.sidelist.labels.tab),render_sidelist(e,events,r.name,i)}sidelist_events=[],-1==$.inArray(r.name,["rhc_event","rhc_gmap"])}function render_tax_filters(e){var t=e&&e.taxfilter?e.taxfilter:{holder_class:"rh-flat-ui fc-head-control",selectpicker:!0,size:10,menu_class:"tax_filter_menu_medium",multiple:e.tax_filter_multiple&&parseInt(e.tax_filter_multiple)?!0:!1},n=$(this);$(this).find("[class*='fc-button-btn_tax_']").each(function(e,a){var r=(a.className.match(/(^|\s)(fc\-button\-btn_tax_([^\s]*))/)||[,,""])[3],i=$('<select class="selectpicker"></select>');if(t.multiple&&i.attr("multiple",!0),i.attr("data-taxonomy",r).append($('<option value="">'+$(this).html()+"</option>")),n.find(".fbd-filter[data-taxonomy='"+r+"']").each(function(e,t){var n=$(t).data("bgcolor")||"transparent";i.append($('<option data-bgcolor="'+n+'" value="'+$(t).val()+'">'+$(t).closest("label").find(".fbd-term-label").html()+"</option>"))}),i.find("option").length>1?($(a).replaceWith(i),i.wrap($('<div class="tax_filter_holder fc-button fc-state-default"></div>').addClass(t.holder_class).addClass(t.menu_class))):($(a).remove(),console.log("Taxonomy filter added to calendar, but disabled in options.  Also turning off the hierarchical filter can help.")),t.selectpicker){i.selectpicker({style:"btn-small btn-taxfilter btn_tax",size:t.size});var o=!1,s=i.parent().find(".dropdown-menu");i.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(o=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),o&&s.addClass("rhc-with-tax-color")}i.unbind("change",tax_filter_change).bind("change",{taxonomy:r,holder:n},tax_filter_change)})}function tax_filter_change(e){$(this).attr("rel",$(e.data.holder).attr("id"));var t=$(this).val();t=null==t?"":t;var n=[];return"string"==typeof t?n.push(t):$.each(t,function(e,t){return""==t?!0:void n.push(t)}),e.data.holder.find(".fbd-filter[data-taxonomy='"+e.data.taxonomy+"']").each(function(e,t){-1==$.inArray($(t).val(),n)?$(t).attr("checked",!1):$(t).attr("checked",!0)}),methods.apply_filter.apply($(this),[!1]),!0}function render_sidelist(e,t,n,a){$.each(t,function(t,r){var i=r.skip_sidelist||!1;!i&&"rhc_gmap"==n&&has_sidelist_holder&&a.sidelist&&a.sidelist.template&&$(a.sidelist.template).length>0&&($(e).parent().find(".rhc-sidelist-holder").addClass("has-events"),sidelist=$(e).parent().find(".rhc-sidelist"),render_sidelist_event(sidelist,r,a))}),$(".rhc-sidelist-event-item").show()}function render_sidelist_event(e,t,n){jQuery(document).ready(function(a){var r=new Date(t.start),i=new Date;if(i.setHours(0,0,0,0),r.getTime()<i.getTime())return!1;var o=a(n.sidelist.template).clone();if(o.attr("id","").addClass("rhc-sidelist-event-item"),t.url&&""!=t.url&&"javascript:void(0);"!=t.url){var s=n.sidelist.link_target||"_BLANK";s=""==s?"_BLANK":s;var l=a('<a href="'+t.url+'">'+t.title+"</a>").attr("target",s).attr("href","javascript:void(0);").bind("click",function(e){var a=n.eventClick?n.eventClick:fc_click;t.fc_click_link="page",t.fc_click_target=s,a(t,e,null)})}else var l=a("<span></span").html(t.title);o.find(".rhc-sidelist-title").empty().append(l);var d=o.find(".rhc-sidelist-date").html();if(o.find(".rhc-sidelist-date").html(a.fullCalendar.formatDate(t.start,d,n)),t.image&&t.image[0]&&""!=t.image[0])var c=a("<img></img>").attr("src",t.image[0]);t.venue_directory&&o.addClass("venue-directory-item").find(".rhc-sidelist-date").hide(),o.find(".rhc-sidelist-image").append(c),e.append(o.show())})}function cb_events_loading(e,t,n,a,r,i){i.for_widget?(a.loading&&a.loading(n,a,i),handle_loading_overlay(e,t,n,a,r,i),n?$(e).find(".fc-have-event").each(function(){$(this).removeClass("fc-state-highlight").removeClass("fc-have-event").css("background-image","")}):cb_events_loaded(t,r,a,i)):(a.loading&&a.loading(n,a,i),n||cb_events_loaded(t,r,a,i),handle_loading_overlay(e,t,n,a,r,i))}function handle_loading_overlay(e,t,n,a,r,i){"undefined"!=typeof i.loadingOverlay&&"1"==i.loadingOverlay&&(n?(0==$(e).find(".fc-content .fc-view-loading").length&&$(e).find(".fullCalendar .fc-content").prepend($('<div class="fc-view-loading"></div>').hide().append('<div class="fc-view-loading-1 ajax-loader"><div class="fc-view-loading-2x xspinner icon-xspinner-3"></div></div>')),$(e).addClass("is-loading").find(".fc-view-loading").addClass("loading-events").find(".ajax-loader").addClass("loading-events").end().stop().fadeIn()):$(e).removeClass("is-loading").find(".fc-view-loading").stop().fadeOut("fast",function(){$(e).find().remove(".fc-view-loading"),"rhc_event"==a.name&&$(e).find(".fc-view-rhc_event").css("min-height","")}))}function cb_events_loaded(e,t,n,a){if(calendar=e,(!a.tax_filter||"1"==a.tax_filter)&&0!=$(calendar).find(".fc-head-control").length){var r=$(calendar).fullCalendar("clientEvents"),i=[];if($.each(r,function(e,t){t.terms&&t.terms.length>0&&$.each(t.terms,function(e,n){if(a.tax_filter_include&&a.tax_filter_include.length>0){if(-1==$.inArray(n.taxonomy,a.tax_filter_include))return}else if(a.tax_filter_skip&&-1!=$.inArray(n.taxonomy,a.tax_filter_skip))return;for(var r=-1,o=0;o<i.length;o++)if(i[o].taxonomy==n.taxonomy){r=o;break}var s="";s=n.gaddress?n.gaddress:n.description?n.description:n.name?n.name:"unknown";var l={value:s,order:n.term_priority?parseInt(n.term_priority):0,local_feed:t.local_feed,term:n};-1==r?i[i.length]={taxonomy:n.taxonomy,label:n.taxonomy_label,terms:[s],uterms:[l],print_priority:n.print_priority?parseInt(n.print_priority):0,filter_type:n.filter_type?n.filter_type:"",color:n.color||"",background_color:n.background_color||""}:-1==$.inArray(s,i[r].terms)&&(i[r].terms.push(s),i[r].uterms.push(l))})}),a.tax_filter_include&&a.tax_filter_include.length>0&&i.length>0&&(new_taxonomies=[],$.each(a.tax_filter_include,function(e,t){$.each(i,function(e,n){t==n.taxonomy&&(new_taxonomies[new_taxonomies.length]=n)})}),i=new_taxonomies),i.length>0){var o=$(calendar).find(".fc-head-control .tax_filter_holder");o.empty(),o.parents(".fc-head-control").removeClass("has-filters"),$.each(i,function(e,t){if(0!=t.terms.lengt){t.uterms.sort(cb_sort_tax_filter),t.terms=[];var n=!1,a=!1;$.each(t.uterms,function(e,r){n&&n!=r.order&&(a=!0),n=r.order,t.terms.push(r.value)}),a||(t.terms.sort(),t.uterms.sort(cb_sort_alphanum));var r=$("<select></select>").attr("title",t.label).attr("multiple","multiple").addClass("tax_filter_field").addClass("selectpicker").data("taxonomy",t.taxonomy).data("taxonomy_filter_type",t.filter_type).append('<option value="">'+t.label+"</option>");$.each(t.uterms,function(e,t){bgcolor=t.term.background_color||"transparent",option_label=t.term&&t.term.name?t.term.name:t.value,_option=$('<option value="'+t.value+'">'+option_label+"</option>").data("term",t),_option.attr("data-bgcolor",bgcolor),r.append(_option)}),r.appendTo(o).wrap('<div class="tax_filter_item_holder"></div>').selectpicker({style:"btn-small btn-taxfilter"});var i=!1,s=r.parent().find(".dropdown-menu");r.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(i=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),i&&s.addClass("rhc-with-tax-color"),o.parents(".fc-head-control").addClass("has-filters")}}),o.find(".tax_filter_field").change(function(){var e=$(this).parents(".fullCalendar"),t=[];$(e).find(".tax_filter_field").each(function(e,n){$(n).find("option:selected").each(function(e,a){var r=$(a).attr("value");if(""!=r){var i=$(n).data("taxonomy_filter_type"),o=$(a).data("term");t.push({taxonomy:$(n).data("taxonomy"),term:r,filter_type:i,slug:o.term&&o.term.slug?o.term.slug:null,term_id:o.term&&o.term.term_id?o.term.term_id:null,local_feed:o.local_feed})}})}),$(e).parent().find(".rhc-sidelist").length>0&&($(e).parent().find(".rhc-sidelist-holder").removeClass("has-events"),$(e).parent().find(".rhc-sidelist").empty()),args={tax_filters:t},a.show_ad&&(args.show_ad=a.show_ad),$(e).data("rhc_tax_filters",t).fullCalendar("rerenderEvents"),$("BODY").trigger("rhc_filter",args)})}}}function cb_view_display(e,t,n,a){t||(t=$(n.element).parents(".fullCalendar")),set_fc_small(t);var r=$(t).fullCalendar("getView");"rhc_gmap"==r.name?$(t).find(".fc-head-control").addClass("show-control"):$(t).find(".fc-head-control").removeClass("show-control"),"rhc_event"==r.name?$(a).parents(".rhc_holder").addClass("view-rhc_event"):$(a).parents(".rhc_holder").removeClass("view-rhc_event"),$(t).data("rhc_tax_filters",[]),$(t).find(".tax_filter_field").each(function(e,t){$(t).val("")});var i=new Date;if(n.visStart<=i&&n.visEnd>=i?$(a).parents(".rhc_holder").addClass("has-current-date").removeClass("not-current-date"):$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),"month"==n.name&&$(a).parents(".rhc_holder").find(".fc-today").length>0&&$(a).parents(".rhc_holder").find(".fc-today").is(".fc-other-month")&&$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),$(a).parents(".rhc_holder").is(".flat-ui-cal")){var o=$(t).parents(".rhc_holder").data("Calendarize"),s=o.modes[o.mode].options;if($(a).parents(".rhc_holder").is(".has-current-date")){try{var l=$("<div/>").html(s.widget_hformat).text()}catch(d){var l=null}var c=l||"'<span class=''fuiw-dayname''>'dddd'</span><span class=''fuiw-month''>'MMMM'</span><span class=''fuiw-year''>'yyyy'</span><span class=''fuiw-day''>'d'</span>'";$(t).find(".fc-header-title h2").html($.fullCalendar.formatDate(i,c,s))}else{str=$(t).find(".fc-header-title h2").html(),str=str.trim();var f=str.split(" ");2==f.length&&(c=isNaN(f[1])?"<span class='fuiw-month'>"+f[1]+"</span><span class='fuiw-year'>"+f[0]+"</span>":"<span class='fuiw-month'>"+f[0]+"</span><span class='fuiw-year'>"+f[1]+"</span>",$(t).find(".fc-header-title h2").html(c))}_skip=s.widget_onechardaylabel&&1==parseInt(s.widget_onechardaylabel)?!0:!1,_skip||$(t).find(".fc-day-header").each(function(e,t){$(t).html($(t).html().substring(0,1))})}}function cb_sort_tax_filter(e,t){return e.order>t.order?1:e.order<t.order?-1:0}function cb_sort_alphanum(e,t){a=e.value.toString(),b=t.value.toString();var n=/[^a-zA-Z]/g,r=/[^0-9]/g,i=a.replace(n,""),o=b.replace(n,"");if(i===o){var s=parseInt(a.replace(r,""),10),l=parseInt(b.replace(r,""),10);return s===l?0:s>l?1:-1}return i>o?1:-1}function add_footer_button(e){var t=$.extend({calendarize:null,calendar:null,e:null,tm:"fc",buttonName:"undefined",label:"",buttonClick:function(){}},e);tm=t.tm;var n=$("<span class='fc-button fc-button-"+t.buttonName+" "+tm+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+t.label+"</span><span class='fc-button-effect'><span></span></span></span></span>");n&&(n.click(function(e){n.hasClass(tm+"-state-disabled")||t.buttonClick(this,e,t)}).mousedown(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){n.removeClass(tm+"-state-down")}).hover(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){n.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(t.e),n.addClass(tm+"-corner-left"),n.addClass(tm+"-corner-right"))}function ical_footer_button_click(e,t,n){var a=n.calendarize;if(f,$(e).parent().find(".ical-tooltip").length>0)$(e).parent().find(".ical-tooltip").remove();else{var r=$(a).data("Calendarize"),i=r.modes[r.mode].options,o=i.events_source+i.events_source_query;o=o.replace("get_calendar_events","get_icalendar_events");var s=o+"&ics=1",l=i.feed&&""!=i.feed?"&feed="+i.feed:"";o+=l,s+=l;var d=$(".ical-tooltip-template").first().clone();d.removeClass("ical-tooltip-template").addClass("ical-tooltip").find(".ical-url").html(o).end().find(".ical-clip").attr("href",o).on("click",function(){return $(this).focus(),$(this).select(),!1}).end().find(".ical-close").on("click",function(){$(this).parents(".fc-footer").find(".fc-button-icalendar").trigger("click")}).end().find(".ical-ics").attr("href",s).end(),$(e).after(d),d.fadeIn("fast",function(){d.find("textarea.ical-url").focus().select()})}}function cb_dayclick(e,t,n,a,r,i){if(r.dayclick){var o=r.dayclick&&""!=r.dayclick&&window[r.dayclick]?window[r.dayclick]:!1;if(o)return o(e,t,n,a,r,i)}else{var o=r.widget_dayclick&&""!=r.widget_dayclick&&window[r.widget_dayclick]?window[r.widget_dayclick]:!1;if(o)calendar_widget_day_click(e,t,n,a,rhc_events_cache,r,i);else if(r.widget_link){if(r.widget_link_view)var s=r.widget_link_view;else var s="agendaDay";$('<form method="post" />').attr("action",r.widget_link).append('<input type="hidden" name="gotodate" value="'+$.fullCalendar.formatDate(e,"yyyy-MM-dd")+'" />').append('<input type="hidden" name="defaultview" value="'+s+'" />').append('<input type="hidden" name="fcalendar" value="'+(r.ev_calendar?r.ev_calendar:"")+'" />').append('<input type="hidden" name="fvenue" value="'+(r.ev_venue?r.ev_venue:"")+'" />').append('<input type="hidden" name="forganizer" value="'+(r.ev_organizer?r.ev_organizer:"")+'" />').appendTo(i).submit()}}}var methods={init:function(e){function t(e,t){if(e.hasClass("fbd-cell")||(e=e.parents(".fbd-cell")),t.hasClass("fbd-checked"))var n={opacity:0,left:-30};else var n={opacity:0,left:30};var r="linear",i="fast";if(0==t.find(".fbd-cell").length)$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else{var o=t.find(".fbd-cell");if(parseInt($(e).data("tab-index"))>parseInt($(o[o.length-1]).data("tab-index")))$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else if(parseInt($(e).data("tab-index"))<parseInt($(o[0]).data("tab-index")))$(e).animate(n,i,r,function(){$(o[0]).before(e).prev().css("left",-1*n.left).animate({opacity:1,left:0})});else for(a=0;a<o.length;a++){var s=o[a];if(parseInt($(e).data("tab-index"))>parseInt($(o[a]).data("tab-index"))&&parseInt($(e).data("tab-index"))<parseInt($(o[a+1]).data("tab-index"))){$(e).animate(n,i,r,function(){$(s).after($(this).css("left",-1*n.left).animate({opacity:1,left:0}))});break}}}}var n=$.extend({editable:!1,mode:"view"},e);return $(".fc-dialog").CalendarizeDialog(),this.each(function(){var e=$(this).data("Calendarize");if(!e){if($(this).data("Calendarize",n).Calendarize("mode",n.mode),0==$(this).find(".rhc-sidelist").length&&($('<div class="rhc-sidelist-holder"><div class="rhc-sidelist-tab"><div class="rhc-sidelist-tab-label"></div></div><div class="rhc-sidelist-head"></div><div class="rhc-sidelist"></div></div>').appendTo(this),$(this).find(".rhc-sidelist-tab").click(function(){$(this).parents(".rhc-sidelist-holder").toggleClass("sidelist-open")})),0==$(this).find("fullCalendar > .fc-head-control").length){var a=".fc-header";$(this).find(a).length>0&&($(this).find(a).after('<div class="fc-head-control rh-flat-ui"><div class="tax_filter_nav"><a href="#" class="tax_filter_previous btn btn-small btn-taxfilter fui-arrow-left"></a></div><div class="tax_filter_holder_viewport"><div class="tax_filter_holder"></div></div></div>'),$(this).find(".tax_filter_previous").click(function(){var e=$(this).parents(".fc-head-control").find(".tax_filter_holder");if(e.stop(!1,!0),e.find(".tax_filter_item_holder").length>0){var t=e.find(".tax_filter_item_holder").first();t.stop(!1,!0);var n=-1*t.outerWidth(!0),a=t.css("opacity");t.animate({opacity:0},400,"swing"),e.animate({"margin-left":n},500,"swing",function(){t.stop(!1,!0).appendTo(e).css("opacity",a),$(this).css("margin-left",0)})}}))}0==$(this).find(".fc-lower-head-tools").length&&($(this).find(".fc-header").after('<div class="fc-lower-head-tools"></div>'),0==$(this).find(".fc-lower-head-tools .fc-filters-dialog").length&&$(this).find(".fc-filters-dialog-holder .fc-filters-dialog").clone().appendTo($(this).find(".fc-lower-head-tools")));var r=.6*parseInt($(this).find(".fc-content").innerHeight());r=300>r?300:r,$(this).find(".fc-lower-head-tools .fc-filters-dialog").find(".fbd-unchecked").css("max-height",r+"px"),$(this).find(".fc-filters-dialog .fbd-tabs").on("click",function(){$(this).parent().parent().find(".fbd-tabs").removeClass("fbd-active-tab").end().find(".fbd-tabs-panel").hide().end().find($(this).find("a").data("tab-target")).show(),$(this).addClass("fbd-active-tab")}).first().trigger("click"),$(this).find('.fbd-cell input[type="checkbox"]').attr("checked",!1),$(this).find('.fbd-cell input[type="checkbox"]').on("click",function(){if($(this).is(":checked"))var e=$(this).parent().parent().parent().parent().find(".fbd-checked");else var e=$(this).parent().parent().parent().parent().find(".fbd-unchecked");t($(this).parent().parent(),e)}),$(this).find(".fullCalendar .fbd-dg-apply,.fullCalendar .fbd-dg-remove").attr("rel",$(this).attr("id")),$(this).find(".fullCalendar .fbd-dg-apply").on("click",function(){return methods.apply_filter.apply($(this),[])}),$(this).find(".fbd-close-tooltip a").unbind("click").click(function(){$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fbd-dg-remove").on("click",function(){$(this).parents(".rhc_holder").find("input[name=s]").val("").trigger("change"),$("#"+$(this).attr("rel")).find("input[type=checkbox].fbd-filter").each(function(e,n){if("undefined"!=typeof $(n).attr("checked")){$(n).attr("checked",!1);var a=$(this).parent().parent().parent().parent().find(".fbd-unchecked");t($(this).parents(".fbd-cell"),a)}}).end().find(".fbd-dg-apply").trigger("click"),$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fc-header").on("click",function(){$(".fct-tooltip").trigger("close-tooltip")}),$(document).keyup(function(e){27==e.keyCode&&($(".fct-tooltip").trigger("close-tooltip"),$(".fc-filters-dialog:visible").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){$(this).hide()}))}),0==$(this).find("fc-view-loading-bottom").length&&$(this).find(".fullCalendar .fc-footer").before($('<div class="fc-view-loading-bottom"></div>').append($('<div class="fc-view-loading-bottom-1"><div class="fc-view-loading-bottom-2 fc-next-arrow"></div></div>').click(function(){$(this).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next")}))),$(this).trigger("rhc_loaded")}})},mode:function(e){var t=this,n=$(this).data("Calendarize");if(n&&n.modes){var a=$.extend(n.common,n.modes[e].options);preload_events(this,a),a.for_widget?(a.eventRender=function(e,t,n){return cb_event_render(o,!0,e,t,n,a)},a.eventAfterAllRender=function(e){return hide_widget_event_list(o,!1,null,null,e,a),cb_event_render_all(o,!0,null,null,e,a)},a.dayClick=function(e,n,r,i){return cb_dayclick(e,n,r,i,a,t)}):(a.eventRender=function(e,t,n){return $(".fc-event-title",t).html(e.title),cb_event_render(o,!1,e,t,n,a)},a.eventAfterAllRender=function(e){return cb_event_render_all(o,!1,null,null,e,a)}),a.loading=function(e,n){return cb_events_loading(t,this,e,n,o,a)},a.eventDataTransform=function(e){if(e.start&&e.start.getFullYear){e.terms||(e.terms=[]);var t={filter_type:"AND",term_priority:parseInt(e.start.getMonth()),description:$.fullCalendar.formatDate(e.start,"MMMM",a),taxonomy:"core_month",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.month?a.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(e.start,"M",a)};e.terms.unshift(t);var n=e.start.getFullYear(),t={filter_type:"AND",term_priority:parseInt(n),description:n,taxonomy:"core_year",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.year?a.tax_filter_label.year:"year",slug:parseInt(n)};e.terms.unshift(t)}return e};var r=function(e,t,n){$.fn.Calendarize.events_source(e,t,n,a)};a.eventSources=[],"1"!=a.json_only&&a.eventSources.push(r),a.json_feed&&a.json_feed.length>0&&("1"==a.json_only&&(a.events=null,a.singleSource=null),a.json_feed&&a.json_feed.length>0&&$.each(a.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,r){$.fn.Calendarize.rhc_feed_src(e,n,r,t,a)};a.eventSources[a.eventSources.length]=n}else{var r=function(e,n,r){$.fn.Calendarize.ext_events_source(e,n,r,t,a)};a.eventSources[a.eventSources.length]=r}})),a.viewRender=function(e,t){cb_view_display(a.for_widget,o,e,t)},a.eventMouseover=function(e,t,n){cb_event_mouseover(e,t,n),a.tooltip_on_hover&&"1"==a.tooltip_on_hover&&$(t.target).closest("a").click(),$(t.target).closest("a").addClass("event-hovered")},a.eventMouseout=function(e,t){$(t.target).closest("a").removeClass("event-hovered")},a.calendar_id=$(this).attr("id"),f=$(this).find(".fullCalendar").fullCalendar(a),n.editable&&0==f.find(".fc-edit-tools").length&&f.prepend('<div class="fc-edit-tools"></div>'),0==f.find(".fc-footer").length&&(f.append('<div class="fc-footer"></div>'),a.icalendar_align&&$(".fc-footer").css("text-align",a.icalendar_align).addClass("dlg-align-"+a.icalendar_align)),a.header&&0==(a.header.center+a.header.left+a.header.right).length&&($(this).find(".fc-header").css("display","none"),$(this).find(".fc-edit-tools").css("display","none"),$(this).find(".fc-head-control").css("display","none"),$(this).find(".fc-lower-head-tools").css("display","none"),$(this).find(".fc-header").attr("hello",1));var i=f.find(".fc-footer"),o=f,s=a.theme?"ui":"fc";if($(".ical-tooltip-template").length>0){var l=$(".ical-tooltip-template").first().data("button_text");add_footer_button({calendar:f,calendarize:t,e:i,tm:s,label:l,buttonName:"icalendar",buttonClick:ical_footer_button_click})}a.gotodate&&""!=a.gotodate&&$(this).find(".fullCalendar").fullCalendar("gotoDate",$.fullCalendar.parseDate(a.gotodate)),$(this).find(".fullCalendar").data("starting_date",$(this).find(".fullCalendar").fullCalendar("getDate")),render_tax_filters.apply(this,[a])}},destroy:function(){return this.each(function(){var e=$(this),t=e.data("Calendarize");$(window).unbind(".Calendarize"),t.Calendarize.remove(),e.removeData("Calendarize")})},apply_filter:function(e){return e="undefined"==typeof e?!0:e,this.each(function(){var t="#"+$(this).attr("rel");$(t+" .fullCalendar").find(".bg_matched").each(function(e,t){$(t).css("background-color",$(t).data("original_bg")||"")});var n=[];$(t+" .fullCalendar").find(".fbd-filter-group").each(function(e,t){var a=[];$(t).find("input[type=checkbox].fbd-filter:checked").each(function(e,t){a[a.length]=$(t).val()}),a.length>0&&(n[n.length]={taxonomy:$(this).data("taxonomy"),terms:a.join(","),terms_array:a})});var a=$(t).data("Calendarize"),r=a.modes[a.mode].options;r.calendar_id=$(t).attr("id");var i=$(t+" .fullCalendar"),o=i.fullCalendar("getView");o.clear_events=!0;var s="";if(n&&$.each(n,function(e,t){s+=r.replace_square_brackets?"&tax%5B"+t.taxonomy+"%5D="+t.terms:"&tax["+t.taxonomy+"]="+t.terms}),$(t).find(".fc-lower-head-tools  input[name=s]").length){var l=$(t).find(".fc-lower-head-tools  input[name=s]").val();""!=l&&(s+="&s="+escape(l))}r.events_source_query_original=r.events_source_query_original?r.events_source_query_original:r.events_source_query,""!=s?(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original+s):(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original);var d=function(e,t,n){$.fn.Calendarize.events_source(e,t,n,r)};if(i.fullCalendar("addEventSource",d),0==n.length)r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)};i.fullCalendar("addEventSource",n)}else{var a=function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)};i.fullCalendar("addEventSource",a)}});else{var c=[];$.each(n,function(e,t){$.each(t.terms_array,function(e,n){r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,a){if(!($.inArray(a,c)>-1)&&a.terms&&a.terms.length>0)for(var e=0;e<a.terms.length;e++)if(a.terms[e].taxonomy==t.taxonomy&&a.terms[e].slug==n)return void(-1==$.inArray(a,c)&&c.push(a))})})}),$.each(c,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)};i.fullCalendar("addEventSource",n)}else{var a=function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)};i.fullCalendar("addEventSource",a)}})}$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),e&&$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click"),$(this).closest(".fullCalendar").find(".fc-no-list-events-message").hide()})}};$.fn.Calendarize=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.Calendarize"):methods.init.apply(this,arguments)};var rhc_events_cache=[];$.fn.Calendarize.rhc_feed_src=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=!0,s=[],l=new Date,d=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:l.getTime(),c={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:d,"data[]":s},f=0;f<rhc_events_cache.length;f++)if(o&&rhc_events_cache[f].start<=c.start&&rhc_events_cache[f].end>=c.end&&rhc_events_cache[f].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[f].events);var u=c;u.url=a.url,i.post(a.url,c,function(a){if("OK"==a.R){var r=[];r=rhc_events_to_fc_events(e,t,a,!1),u.events=r,in_rhc_events_cache(u.start,u.end,u.url)||(rhc_events_cache[rhc_events_cache.length]=u),n(r)}else"ERR"==a.R},"json")})},$.fn.Calendarize.ext_events_source=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=!0,s=[],l=new Date,d=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:l.getTime(),c={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:d,"data[]":s},f=0;f<rhc_events_cache.length;f++)if(o&&rhc_events_cache[f].start<=c.start&&rhc_events_cache[f].end>=c.end&&rhc_events_cache[f].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[f].events);
var u=c;u.url=a.url,i.post(a.url,c,function(e){u.events=e,in_rhc_events_cache(u.start,u.end,u.url)||(rhc_events_cache[rhc_events_cache.length]=u),n(u.events)},"json")})},$.fn.Calendarize.events_source=function(e,t,n,a){jQuery(document).ready(function(r){var i=[];r(".calendarize_meta_data").each(function(e,t){i[i.length]="checkbox"==t.type?[t.name,r(t).is(":checked")?1:0]:[t.name,r(t).val()]});var o=a.events_source+a.events_source_query;"undefined"!=typeof icl_lang&&(o+="&lang="+icl_lang),a.calendar_id&&""!=a.calendar_id?(vo=r("#"+a.calendar_id).find(".fullCalendar").fullCalendar("getView"),view_name=vo.name):view_name="";for(var s=!0,l=new Date,d=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:l.getTime(),c={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),rhc_shrink:a.shrink?parseInt(a.shrink):"",view:view_name,ver:d,_:"","data[]":i},f=0;f<rhc_events_cache.length;f++)if(s&&rhc_events_cache[f].start<=c.start&&rhc_events_cache[f].end>=c.end&&rhc_events_cache[f].url==o)return parseInt(a.debugjs)&&rhc_console("Loading from rhc_events_cache."),void n(rhc_events_cache[f].events);var u=c;u.url=o,o=o+"&start="+c.start+"&end="+c.end+"&rhc_shrink="+c.rhc_shrink+"&view="+c.view+"&ver="+c.ver,i.length>0&&r.each(i,function(e,t){o=o+"&data["+e+"][0]="+t[0],o=o+"&data["+e+"][1]="+t[1]}),queryString=o.substring(o.indexOf("?")+1),hash=CryptoJS.MD5(queryString),c._=hash.toString(CryptoJS.enc.Hex),o=o+"&_="+c._,r.ajax({url:o,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",cache:!0,success:function(r){if("OK"==r.R){var i=[];i=rhc_events_to_fc_events(e,t,r,!0),i=handle_local_tz(i,a,r),i=allday_group(i,a),u.events=i,in_rhc_events_cache(u.start,u.end,u.url)||(rhc_events_cache[rhc_events_cache.length]=u),n(i)}else"ERR"==r.R},error:function(){}})})},$.fn.RHCLink=function(e,t){var n=t,a=t.calendar,r=a.options,i=($.extend({eventClick:"fc_click"},r),e.fc_click_target||"_self");return e.gcal||""==e.url?$(this):e.direct_link?$(this).wrap($("<a></a>").attr("href",e.url).attr("target",i)).parent():$(this).wrap($("<a></a>").attr("target",i).attr("href",e.url).unbind("click").bind("click",function(t){var r=a.options.eventClick?a.options.eventClick:fc_click;return r(e,t,n)})).parent()};var sidelist_events=[]}(jQuery),function(e){var t={init:function(t){var n=e.extend({draggable:!0},t);return this.each(function(){var t=e(this).data("CalendarizeDialog");t||(e(this).data("CalendarizeDialog",n),n.draggable&&e(this).draggable({handle:".ui-widget-header"}),e(this).find(".ui-dialog-titlebar-close").on("click",function(){e(this).parent().parent().parent().CalendarizeDialog("close")}),j),e(this).hide()})},open:function(t){e(this).show().css("margin-left",0).offset(t.offset).css("margin-left",t.margin_left)},close:function(){e(this).hide()}};e.fn.CalendarizeDialog=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.CalendarizeDialog"):t.init.apply(this,arguments)}}(jQuery),function(e){function t(t){var n=[];return t.children().each(function(t,a){n.push({name:e(a).html(),lon:e(a).data("glon"),lat:e(a).data("glat"),info:e(a).data("ginfo"),address:e(a).data("gaddress"),marker_active:e(a).data("marker_active"),marker_inactive:e(a).data("marker_active"),marker_size:e(a).data("marker_size")})}),n}function n(t,a,r){function i(e,a){var i=function(i,o){return o==google.maps.GeocoderStatus.OK&&(latlng=i[0].geometry.location,e[a].lat=latlng.lat(),e[a].lon=latlng.lng()),n(t,e,r)};return i}if(r++,r>10)return!1;if("interactive"!=t.data("type"))return!1;if(0==a.length)return!1;for(var o=0;o<a.length;o++)if(!a[o].lat&&!a[o].lon&&a[o].address){var s=new google.maps.Geocoder;return void s.geocode({address:a[o].address},i(a,o))}t.uniqueId(),ratio=t.data("ratio"),ratio=""==ratio?"4:3":ratio,ratio_arr=ratio.split(":"),h=t.width()*ratio_arr[1]/ratio_arr[0],t.height(h),maptype=t.data("maptype")||"ROADMAP",settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(a[0].lat,a[0].lon)},t.data("zoom")&&(settings.zoom=t.data("zoom"));var l=new google.maps.Map(t.get(0),settings),d=new google.maps.LatLngBounds,c=new google.maps.InfoWindow;e.each(a,function(e,t){marker=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:l}),d.extend(marker.position),google.maps.event.addListener(marker,"click",function(e){return function(){c.setContent(t.info||t.name||t.address),c.open(l,e)}}(marker,e))}),a.length>1&&l.fitBounds(d)}var a={init:function(a){e.extend({todo:!1},a);return this.each(function(){var a=e(this),r=a.data("rhc_gmap");return r?void 0:(a.data("rhc_gmap",!0),n(a,t(a),0),!0)})}};e.fn.rhcGmap=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.rhcGmap"):a.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(){init_rhc()});